(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function V(){}function B(t,e){for(const n in e)t[n]=e[n];return t}function Nn(t){return t()}function Lt(){return Object.create(null)}function fe(t){t.forEach(Nn)}function je(t){return typeof t=="function"}function L(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Je;function Fn(t,e){return Je||(Je=document.createElement("a")),Je.href=e,t===Je.href}function cr(t){return Object.keys(t).length===0}function Ln(t,...e){if(t==null)return V;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ue(t,e,n){t.$$.on_destroy.push(Ln(e,n))}function de(t,e,n,r){if(t){const s=Cn(t,e,n,r);return t[0](s)}}function Cn(t,e,n,r){return t[1]&&r?B(n.ctx.slice(),t[1](r(e))):n.ctx}function pe(t,e,n,r){if(t[2]&&r){const s=t[2](r(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const l=[],i=Math.max(e.dirty.length,s.length);for(let a=0;a<i;a+=1)l[a]=e.dirty[a]|s[a];return l}return e.dirty|s}return e.dirty}function ge(t,e,n,r,s,l){if(s){const i=Cn(e,n,r,l);t.p(i,s)}}function me(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function ne(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function ye(t,e){const n={};e=new Set(e);for(const r in t)!e.has(r)&&r[0]!=="$"&&(n[r]=t[r]);return n}function $e(t){return t==null?"":t}function fr(t){return t&&je(t.destroy)?t.destroy:V}function g(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function $t(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _(t){return document.createElement(t)}function x(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function W(t){return document.createTextNode(t)}function $(){return W(" ")}function lt(){return W("")}function Z(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Ct(t){return function(e){return e.preventDefault(),t.call(this,e)}}function dr(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Bt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:f(t,r,e[r])}function Pt(t,e){for(const n in e)f(t,n,e[n])}function pr(t){return t===""?null:+t}function gr(t){return Array.from(t.childNodes)}function re(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function xe(t,e){t.value=e==null?"":e}function ht(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function ee(t,e,n){t.classList[n?"add":"remove"](e)}let He;function Me(t){He=t}function mr(){if(!He)throw new Error("Function called outside component initialization");return He}function st(t){mr().$$.on_mount.push(t)}function Re(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Pe=[],et=[],Ye=[],Mt=[],hr=Promise.resolve();let _t=!1;function _r(){_t||(_t=!0,hr.then(Bn))}function vt(t){Ye.push(t)}const pt=new Set;let Ke=0;function Bn(){const t=He;do{for(;Ke<Pe.length;){const e=Pe[Ke];Ke++,Me(e),vr(e.$$)}for(Me(null),Pe.length=0,Ke=0;et.length;)et.pop()();for(let e=0;e<Ye.length;e+=1){const n=Ye[e];pt.has(n)||(pt.add(n),n())}Ye.length=0}while(Pe.length);for(;Mt.length;)Mt.pop()();_t=!1,pt.clear(),Me(t)}function vr(t){if(t.fragment!==null){t.update(),fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(vt)}}const Qe=new Set;let De;function ie(){De={r:0,c:[],p:De}}function ae(){De.r||fe(De.c),De=De.p}function v(t,e){t&&t.i&&(Qe.delete(t),t.i(e))}function k(t,e,n,r){if(t&&t.o){if(Qe.has(t))return;Qe.add(t),De.c.push(()=>{Qe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const yr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function St(t,e){k(t,1,1,()=>{e.delete(t.key)})}function jt(t,e,n,r,s,l,i,a,o,u,c,d){let p=t.length,m=l.length,h=p;const S={};for(;h--;)S[t[h].key]=h;const j=[],T=new Map,F=new Map;for(h=m;h--;){const y=d(s,l,h),I=n(y);let X=i.get(I);X?r&&X.p(y,e):(X=u(I,y),X.c()),T.set(I,j[h]=X),I in S&&F.set(I,Math.abs(h-S[I]))}const D=new Set,z=new Set;function A(y){v(y,1),y.m(a,c),i.set(y.key,y),c=y.first,m--}for(;p&&m;){const y=j[m-1],I=t[p-1],X=y.key,N=I.key;y===I?(c=y.first,p--,m--):T.has(N)?!i.has(X)||D.has(X)?A(y):z.has(N)?p--:F.get(X)>F.get(N)?(z.add(X),A(y)):(D.add(N),p--):(o(I,i),p--)}for(;p--;){const y=t[p];T.has(y.key)||o(y,i)}for(;m;)A(j[m-1]);return j}function be(t,e){const n={},r={},s={$$scope:1};let l=t.length;for(;l--;){const i=t[l],a=e[l];if(a){for(const o in i)o in a||(r[o]=1);for(const o in a)s[o]||(n[o]=a[o],s[o]=1);t[l]=a}else for(const o in i)s[o]=1}for(const i in r)i in n||(n[i]=void 0);return n}function Ae(t){return typeof t=="object"&&t!==null?t:{}}function R(t){t&&t.c()}function O(t,e,n,r){const{fragment:s,on_mount:l,on_destroy:i,after_update:a}=t.$$;s&&s.m(e,n),r||vt(()=>{const o=l.map(Nn).filter(je);i?i.push(...o):fe(o),t.$$.on_mount=[]}),a.forEach(vt)}function E(t,e){const n=t.$$;n.fragment!==null&&(fe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function br(t,e){t.$$.dirty[0]===-1&&(Pe.push(t),_r(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(t,e,n,r,s,l,i,a=[-1]){const o=He;Me(t);const u=t.$$={fragment:null,ctx:null,props:l,update:V,not_equal:s,bound:Lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Lt(),dirty:a,skip_bound:!1,root:e.target||o.$$.root};i&&i(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(d,p,...m)=>{const h=m.length?m[0]:p;return u.ctx&&s(u.ctx[d],u.ctx[d]=h)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](h),c&&br(t,d)),p}):[],u.update(),c=!0,fe(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const d=gr(e.target);u.fragment&&u.fragment.l(d),d.forEach(b)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),O(t,e.target,e.anchor,e.customElement),Bn()}Me(o)}class M{$destroy(){E(this,1),this.$destroy=V}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!cr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function wr(t){var a;let e,n,r,s=Math.round((a=t[0])!=null?a:0)+"",l,i;return{c(){e=_("div"),n=_("span"),n.textContent="!",r=W(`

  Paikannuksen tarkkuus: `),l=W(s),i=W("m"),f(n,"class","location-accuracy-attention text-l space-xxs space-keep-r bold color-alert"),ee(n,"hidden",!t[1].length),f(e,"class","location-accuracy align-right text-s"),ee(e,"color-alert",t[1]==="alert"),ee(e,"color-warning",t[1]==="warning")},m(o,u){w(o,e,u),g(e,n),g(e,r),g(e,l),g(e,i)},p(o,[u]){var c;u&2&&ee(n,"hidden",!o[1].length),u&1&&s!==(s=Math.round((c=o[0])!=null?c:0)+"")&&re(l,s),u&2&&ee(e,"color-alert",o[1]==="alert"),u&2&&ee(e,"color-warning",o[1]==="warning")},i:V,o:V,d(o){o&&b(e)}}}function kr(t,e,n){let r,{accuracy:s}=e;return t.$$set=l=>{"accuracy"in l&&n(0,s=l.accuracy)},t.$$.update=()=>{t.$$.dirty&1&&n(1,r=s>500?"alert":s>100?"warning":"")},[s,r]}class $r extends M{constructor(e){super(),P(this,e,kr,wr,L,{accuracy:0})}}const Ne=[];function Sr(t,e){return{subscribe:Ce(t,e).subscribe}}function Ce(t,e=V){let n;const r=new Set;function s(a){if(L(t,a)&&(t=a,n)){const o=!Ne.length;for(const u of r)u[1](),Ne.push(u,t);if(o){for(let u=0;u<Ne.length;u+=2)Ne[u][0](Ne[u+1]);Ne.length=0}}}function l(a){s(a(t))}function i(a,o=V){const u=[a,o];return r.add(u),r.size===1&&(n=e(s)||V),a(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:s,update:l,subscribe:i}}function jr(t,e,n){const r=!Array.isArray(t),s=r?[t]:t,l=e.length<2;return Sr(n,i=>{let a=!1;const o=[];let u=0,c=V;const d=()=>{if(u)return;c();const m=e(r?o[0]:o,i);l?i(m):c=je(m)?m:V},p=s.map((m,h)=>Ln(m,S=>{o[h]=S,u&=~(1<<h),a&&d()},()=>{u|=1<<h}));return a=!0,d(),function(){fe(p),c()}})}function Q(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function le(t){return function e(n){return arguments.length===0||Q(n)?e:t.apply(this,arguments)}}function q(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return Q(n)?e:le(function(s){return t(n,s)});default:return Q(n)&&Q(r)?e:Q(n)?le(function(s){return t(s,r)}):Q(r)?le(function(s){return t(n,s)}):t(n,r)}}}function Ar(t,e){t=t||[],e=e||[];var n,r=t.length,s=e.length,l=[];for(n=0;n<r;)l[l.length]=t[n],n+=1;for(n=0;n<s;)l[l.length]=e[n],n+=1;return l}function Ve(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(n){return e.apply(this,arguments)};case 2:return function(n,r){return e.apply(this,arguments)};case 3:return function(n,r,s){return e.apply(this,arguments)};case 4:return function(n,r,s,l){return e.apply(this,arguments)};case 5:return function(n,r,s,l,i){return e.apply(this,arguments)};case 6:return function(n,r,s,l,i,a){return e.apply(this,arguments)};case 7:return function(n,r,s,l,i,a,o){return e.apply(this,arguments)};case 8:return function(n,r,s,l,i,a,o,u){return e.apply(this,arguments)};case 9:return function(n,r,s,l,i,a,o,u,c){return e.apply(this,arguments)};case 10:return function(n,r,s,l,i,a,o,u,c,d){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function it(t,e,n){return function(){for(var r=[],s=0,l=t,i=0;i<e.length||s<arguments.length;){var a;i<e.length&&(!Q(e[i])||s>=arguments.length)?a=e[i]:(a=arguments[s],s+=1),r[i]=a,Q(a)||(l-=1),i+=1}return l<=0?n.apply(this,r):Ve(l,it(t,r,n))}}var Tr=q(function(e,n){return e===1?le(n):Ve(e,it(e,[],n))});const at=Tr;function he(t){return function e(n,r,s){switch(arguments.length){case 0:return e;case 1:return Q(n)?e:q(function(l,i){return t(n,l,i)});case 2:return Q(n)&&Q(r)?e:Q(n)?q(function(l,i){return t(l,r,i)}):Q(r)?q(function(l,i){return t(n,l,i)}):le(function(l){return t(n,r,l)});default:return Q(n)&&Q(r)&&Q(s)?e:Q(n)&&Q(r)?q(function(l,i){return t(l,i,s)}):Q(n)&&Q(s)?q(function(l,i){return t(l,r,i)}):Q(r)&&Q(s)?q(function(l,i){return t(n,l,i)}):Q(n)?le(function(l){return t(l,r,s)}):Q(r)?le(function(l){return t(n,l,s)}):Q(s)?le(function(l){return t(n,r,l)}):t(n,r,s)}}}const Oe=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function Dr(t){return t!=null&&typeof t["@@transducer/step"]=="function"}function Xe(t,e,n){return function(){if(arguments.length===0)return n();var r=arguments[arguments.length-1];if(!Oe(r)){for(var s=0;s<t.length;){if(typeof r[t[s]]=="function")return r[t[s]].apply(r,Array.prototype.slice.call(arguments,0,-1));s+=1}if(Dr(r)){var l=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return l(r)}}return n.apply(this,arguments)}}function Or(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}const ke={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};var Er=q(function(e,n){return n>e?n:e});const Rr=Er;function Ue(t,e){for(var n=0,r=e.length,s=Array(r);n<r;)s[n]=t(e[n]),n+=1;return s}function We(t){return Object.prototype.toString.call(t)==="[object String]"}var Ir=le(function(e){return Oe(e)?!0:!e||typeof e!="object"||We(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1});const At=Ir;var Nr=function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,n){return this.f(e,n)},t}();function Fr(t){return new Nr(t)}var Lr=q(function(e,n){return Ve(e.length,function(){return e.apply(n,arguments)})});const Cr=Lr;function Br(t,e,n){for(var r=0,s=n.length;r<s;){if(e=t["@@transducer/step"](e,n[r]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}function Ut(t,e,n){for(var r=n.next();!r.done;){if(e=t["@@transducer/step"](e,r.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function qt(t,e,n,r){return t["@@transducer/result"](n[r](Cr(t["@@transducer/step"],t),e))}var zt=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Fe(t,e,n){if(typeof t=="function"&&(t=Fr(t)),At(n))return Br(t,e,n);if(typeof n["fantasy-land/reduce"]=="function")return qt(t,e,n,"fantasy-land/reduce");if(n[zt]!=null)return Ut(t,e,n[zt]());if(typeof n.next=="function")return Ut(t,e,n);if(typeof n.reduce=="function")return qt(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Pr=function(){function t(e,n){this.xf=n,this.f=e}return t.prototype["@@transducer/init"]=ke.init,t.prototype["@@transducer/result"]=ke.result,t.prototype["@@transducer/step"]=function(e,n){return this.xf["@@transducer/step"](e,this.f(n))},t}(),Mr=q(function(e,n){return new Pr(e,n)});const Ur=Mr;function Ee(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var Ht=Object.prototype.toString,qr=function(){return Ht.call(arguments)==="[object Arguments]"?function(e){return Ht.call(e)==="[object Arguments]"}:function(e){return Ee("callee",e)}}();const Pn=qr;var zr=!{toString:null}.propertyIsEnumerable("toString"),Wt=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Vt=function(){return arguments.propertyIsEnumerable("length")}(),Hr=function(e,n){for(var r=0;r<e.length;){if(e[r]===n)return!0;r+=1}return!1},Wr=le(typeof Object.keys=="function"&&!Vt?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var n,r,s=[],l=Vt&&Pn(e);for(n in e)Ee(n,e)&&(!l||n!=="length")&&(s[s.length]=n);if(zr)for(r=Wt.length-1;r>=0;)n=Wt[r],Ee(n,e)&&!Hr(s,n)&&(s[s.length]=n),r-=1;return s});const Le=Wr;var Vr=q(Xe(["fantasy-land/map","map"],Ur,function(e,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return at(n.length,function(){return e.call(this,n.apply(this,arguments))});case"[object Object]":return Fe(function(r,s){return r[s]=e(n[s]),r},{},Le(n));default:return Ue(e,n)}}));const Ie=Vr,ot=Number.isInteger||function(e){return e<<0===e};var Xr=q(function(e,n){var r=e<0?n.length+e:e;return We(n)?n.charAt(r):n[r]});const Mn=Xr;var Gr=q(function(e,n){if(n!=null)return ot(e)?Mn(e,n):n[e]});const ce=Gr;var Jr=q(function(e,n){return Ie(ce(e),n)});const Kr=Jr;var Yr=he(Fe);const Un=Yr;var Qr=he(function(e,n,r){var s=e(n),l=e(r);return s<l?-1:s>l?1:0});const Xt=Qr;function Zr(t,e,n){if(ot(t)&&Oe(n)){var r=[].concat(n);return r[t]=e,r}var s={};for(var l in n)s[l]=n[l];return s[t]=e,s}var xr=le(function(e){return e==null});const qn=xr;var el=he(function t(e,n,r){if(e.length===0)return n;var s=e[0];if(e.length>1){var l=!qn(r)&&Ee(s,r)?r[s]:ot(e[1])?[]:{};n=t(Array.prototype.slice.call(e,1),n,l)}return Zr(s,n,r)});const tl=el;var nl=he(function(e,n,r){return tl([e],n,r)});const Gt=nl;function yt(t){var e=Object.prototype.toString.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}function rl(t){return function e(n){for(var r,s,l,i=[],a=0,o=n.length;a<o;){if(At(n[a]))for(r=t?e(n[a]):n[a],l=0,s=r.length;l<s;)i[i.length]=r[l],l+=1;else i[i.length]=n[a];a+=1}return i}}function ll(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}}var sl=function(t){return{"@@transducer/init":ke.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var r=t["@@transducer/step"](e,n);return r["@@transducer/reduced"]?ll(r):r}}},il=function(e){var n=sl(e);return{"@@transducer/init":ke.init,"@@transducer/result":function(r){return n["@@transducer/result"](r)},"@@transducer/step":function(r,s){return At(s)?Fe(n,r,s):Fe(n,r,[s])}}};const al=il;var ol=q(function(e,n){return Ie(e,al(n))});const ul=ol;var cl=q(Xe(["fantasy-land/chain","chain"],ul,function(e,n){return typeof n=="function"?function(r){return e(n(r))(r)}:rl(!1)(Ie(e,n))}));const zn=cl;function fl(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}var dl=le(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});const bt=dl;function Hn(t,e,n,r){var s=function(i){for(var a=e.length,o=0;o<a;){if(t===e[o])return n[o];o+=1}e[o]=t,n[o]=i;for(var u in t)t.hasOwnProperty(u)&&(i[u]=r?Hn(t[u],e,n,!0):t[u]);return i};switch(bt(t)){case"Object":return s(Object.create(Object.getPrototypeOf(t)));case"Array":return s([]);case"Date":return new Date(t.valueOf());case"RegExp":return fl(t);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return t.slice();default:return t}}function pl(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function Tt(t,e){return function(){var n=arguments.length;if(n===0)return e();var r=arguments[n-1];return Oe(r)||typeof r[t]!="function"?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var gl=he(Tt("slice",function(e,n,r){return Array.prototype.slice.call(r,e,n)}));const ml=gl;var hl=le(Tt("tail",ml(1,1/0)));const _l=hl;function Se(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Ve(arguments[0].length,Un(pl,arguments[0],_l(arguments)))}function Jt(t){for(var e=[],n;!(n=t.next()).done;)e.push(n.value);return e}function Kt(t,e,n){for(var r=0,s=n.length;r<s;){if(t(e,n[r]))return!0;r+=1}return!1}function vl(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function yl(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}const gt=typeof Object.is=="function"?Object.is:yl;function Yt(t,e,n,r){var s=Jt(t),l=Jt(e);function i(a,o){return Dt(a,o,n.slice(),r.slice())}return!Kt(function(a,o){return!Kt(i,o,a)},l,s)}function Dt(t,e,n,r){if(gt(t,e))return!0;var s=bt(t);if(s!==bt(e))return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(s){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&vl(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&gt(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!gt(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var l=n.length-1;l>=0;){if(n[l]===t)return r[l]===e;l-=1}switch(s){case"Map":return t.size!==e.size?!1:Yt(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size!==e.size?!1:Yt(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=Le(t);if(i.length!==Le(e).length)return!1;var a=n.concat([t]),o=r.concat([e]);for(l=i.length-1;l>=0;){var u=i[l];if(!(Ee(u,e)&&Dt(e[u],t[u],a,o)))return!1;l-=1}return!0}var bl=q(function(e,n){return Dt(e,n,[],[])});const Ot=bl;function wl(t,e,n){var r,s;if(typeof t.indexOf=="function")switch(typeof e){case"number":if(e===0){for(r=1/e;n<t.length;){if(s=t[n],s===0&&1/s===r)return n;n+=1}return-1}else if(e!==e){for(;n<t.length;){if(s=t[n],typeof s=="number"&&s!==s)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(e===null)return t.indexOf(e,n)}for(;n<t.length;){if(Ot(t[n],e))return n;n+=1}return-1}function tt(t,e){return wl(e,t,0)>=0}function mt(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var Be=function(e){return(e<10?"0":"")+e},kl=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+Be(e.getUTCMonth()+1)+"-"+Be(e.getUTCDate())+"T"+Be(e.getUTCHours())+":"+Be(e.getUTCMinutes())+":"+Be(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};const $l=kl;function Sl(t){return function(){return!t.apply(this,arguments)}}function jl(t,e){for(var n=0,r=e.length,s=[];n<r;)t(e[n])&&(s[s.length]=e[n]),n+=1;return s}function Wn(t){return Object.prototype.toString.call(t)==="[object Object]"}var Al=function(){function t(e,n){this.xf=n,this.f=e}return t.prototype["@@transducer/init"]=ke.init,t.prototype["@@transducer/result"]=ke.result,t.prototype["@@transducer/step"]=function(e,n){return this.f(n)?this.xf["@@transducer/step"](e,n):e},t}(),Tl=q(function(e,n){return new Al(e,n)});const Dl=Tl;var Ol=q(Xe(["fantasy-land/filter","filter"],Dl,function(t,e){return Wn(e)?Fe(function(n,r){return t(e[r])&&(n[r]=e[r]),n},{},Le(e)):jl(t,e)}));const Vn=Ol;var El=q(function(e,n){return Vn(Sl(e),n)});const ut=El;function Xn(t,e){var n=function(i){var a=e.concat([t]);return tt(i,a)?"<Circular>":Xn(i,a)},r=function(l,i){return Ue(function(a){return mt(a)+": "+n(l[a])},i.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+Ue(n,t).join(", ")+"))";case"[object Array]":return"["+Ue(n,t).concat(r(t,ut(function(l){return/^\d+$/.test(l)},Le(t)))).join(", ")+"]";case"[object Boolean]":return typeof t=="object"?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?n(NaN):mt($l(t)))+")";case"[object Null]":return"null";case"[object Number]":return typeof t=="object"?"new Number("+n(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object String]":return typeof t=="object"?"new String("+n(t.valueOf())+")":mt(t);case"[object Undefined]":return"undefined";default:if(typeof t.toString=="function"){var s=t.toString();if(s!=="[object Object]")return s}return"{"+r(t,Le(t)).join(", ")+"}"}}var Rl=le(function(e){return Xn(e,[])});const Ze=Rl;var Il=q(function(e,n){if(Oe(e)){if(Oe(n))return e.concat(n);throw new TypeError(Ze(n)+" is not an array")}if(We(e)){if(We(n))return e+n;throw new TypeError(Ze(n)+" is not a string")}if(e!=null&&yt(e["fantasy-land/concat"]))return e["fantasy-land/concat"](n);if(e!=null&&yt(e.concat))return e.concat(n);throw new TypeError(Ze(e)+' does not have a method named "concat" or "fantasy-land/concat"')});const Nl=Il;var Fl=le(function(e){return at(e.length,e)});const Ll=Fl;var Cl=q(function(e,n){return at(Un(Rr,0,Kr("length",n)),function(){var r=arguments,s=this;return e.apply(s,Ue(function(l){return l.apply(s,r)},n))})});const Bl=Cl;var Pl=function(){function t(e,n,r,s){this.valueFn=e,this.valueAcc=n,this.keyFn=r,this.xf=s,this.inputs={}}return t.prototype["@@transducer/init"]=ke.init,t.prototype["@@transducer/result"]=function(e){var n;for(n in this.inputs)if(Ee(n,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[n]),e["@@transducer/reduced"])){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,n){var r=this.keyFn(n);return this.inputs[r]=this.inputs[r]||[r,this.valueAcc],this.inputs[r][1]=this.valueFn(this.inputs[r][1],n),e},t}(),Ml=it(4,[],function(e,n,r,s){return new Pl(e,n,r,s)});const Ul=Ml;var ql=it(4,[],Xe([],Ul,function(e,n,r,s){return Fe(function(l,i){var a=r(i),o=e(Ee(a,l)?l[a]:Hn(n,[],[],!1),i);return o&&o["@@transducer/reduced"]?Or(l):(l[a]=o,l)},{},s)}));const zl=ql;var Hl=q(function(e,n){return n==null||n!==n?e:n});const Gn=Hl;var Wl=he(function(e,n,r){var s=e(n),l=e(r);return s>l?-1:s<l?1:0});const Vl=Wl;var Xl=function(){function t(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return t.prototype.add=function(e){return!Qt(e,!0,this)},t.prototype.has=function(e){return Qt(e,!1,this)},t}();function Qt(t,e,n){var r=typeof t,s,l;switch(r){case"string":case"number":return t===0&&1/t===-1/0?n._items["-0"]?!0:(e&&(n._items["-0"]=!0),!1):n._nativeSet!==null?e?(s=n._nativeSet.size,n._nativeSet.add(t),l=n._nativeSet.size,l===s):n._nativeSet.has(t):r in n._items?t in n._items[r]?!0:(e&&(n._items[r][t]=!0),!1):(e&&(n._items[r]={},n._items[r][t]=!0),!1);case"boolean":if(r in n._items){var i=t?1:0;return n._items[r][i]?!0:(e&&(n._items[r][i]=!0),!1)}else return e&&(n._items[r]=t?[!1,!0]:[!0,!1]),!1;case"function":return n._nativeSet!==null?e?(s=n._nativeSet.size,n._nativeSet.add(t),l=n._nativeSet.size,l===s):n._nativeSet.has(t):r in n._items?tt(t,n._items[r])?!0:(e&&n._items[r].push(t),!1):(e&&(n._items[r]=[t]),!1);case"undefined":return n._items[r]?!0:(e&&(n._items[r]=!0),!1);case"object":if(t===null)return n._items.null?!0:(e&&(n._items.null=!0),!1);default:return r=Object.prototype.toString.call(t),r in n._items?tt(t,n._items[r])?!0:(e&&n._items[r].push(t),!1):(e&&(n._items[r]=[t]),!1)}}const Et=Xl;var Gl=q(function(e,n){for(var r=[],s=0,l=e.length,i=n.length,a=new Et,o=0;o<i;o+=1)a.add(n[o]);for(;s<l;)a.add(e[s])&&(r[r.length]=e[s]),s+=1;return r});const Zt=Gl;function Jl(t){var e=Object.prototype.toString.call(t);return e==="[object Uint8ClampedArray]"||e==="[object Int8Array]"||e==="[object Uint8Array]"||e==="[object Int16Array]"||e==="[object Uint16Array]"||e==="[object Int32Array]"||e==="[object Uint32Array]"||e==="[object Float32Array]"||e==="[object Float64Array]"||e==="[object BigInt64Array]"||e==="[object BigUint64Array]"}var Kl=le(function(e){return e!=null&&typeof e["fantasy-land/empty"]=="function"?e["fantasy-land/empty"]():e!=null&&e.constructor!=null&&typeof e.constructor["fantasy-land/empty"]=="function"?e.constructor["fantasy-land/empty"]():e!=null&&typeof e.empty=="function"?e.empty():e!=null&&e.constructor!=null&&typeof e.constructor.empty=="function"?e.constructor.empty():Oe(e)?[]:We(e)?"":Wn(e)?{}:Pn(e)?function(){return arguments}():Jl(e)?e.constructor.from(""):void 0});const Yl=Kl;var Ql=q(Tt("groupBy",zl(function(t,e){return t.push(e),t},[])));const Zl=Ql;var xl=q(tt);const es=xl;var ts=function(){function t(e,n){this.xf=n,this.f=e,this.set=new Et}return t.prototype["@@transducer/init"]=ke.init,t.prototype["@@transducer/result"]=ke.result,t.prototype["@@transducer/step"]=function(e,n){return this.set.add(this.f(n))?this.xf["@@transducer/step"](e,n):e},t}(),ns=q(function(e,n){return new ts(e,n)});const rs=ns;var ls=q(Xe([],rs,function(t,e){for(var n=new Et,r=[],s=0,l,i;s<e.length;)i=e[s],l=t(i),n.add(l)&&r.push(i),s+=1;return r}));const ss=ls;var is=q(function(e,n){return at(e+1,function(){var r=arguments[e];if(r!=null&&yt(r[n]))return r[n].apply(r,Array.prototype.slice.call(arguments,0,e));throw new TypeError(Ze(r)+' does not have a method named "'+n+'"')})});const Jn=is;var as=le(function(e){return e!=null&&Ot(e,Yl(e))});const os=as;var us=Jn(1,"join");const cs=us;var fs=le(function(e){return Bl(function(){return Array.prototype.slice.call(arguments,0)},e)});const ds=fs;var ps=q(function(e,n){return e.map(function(r){for(var s=n,l=0,i;l<r.length;){if(s==null)return;i=r[l],s=ot(i)?Mn(i,s):s[i],l+=1}return s})});const gs=ps;var ms=q(function(e,n){return gs([e],n)[0]});const hs=ms;var _s=q(function(e,n){for(var r={},s={},l=0,i=e.length;l<i;)s[e[l]]=1,l+=1;for(var a in n)s.hasOwnProperty(a)||(r[a]=n[a]);return r});const vs=_s;function ys(t){return q(function(e,n){return Ve(Math.max(0,e.length-n.length),function(){return e.apply(this,t(n,arguments))})})}var bs=ys(Ar);const Kn=bs;var ws=he(function(e,n,r){return Gn(e,hs(n,r))});const Rt=ws;var ks=he(function(e,n,r){return Ot(n,ce(e,r))});const $s=ks;var Ss=he(function(e,n,r){return Gn(e,ce(n,r))});const js=Ss;var As=he(function(e,n,r){return e(ce(n,r))});const Ts=As;var Ds=q(function(e,n){return Array.prototype.slice.call(n,0).sort(function(r,s){var l=e(r),i=e(s);return l<i?-1:l>i?1:0})});const xt=Ds;var Os=q(function(e,n){return Array.prototype.slice.call(n,0).sort(function(r,s){for(var l=0,i=0;l===0&&i<e.length;)l=e[i](r,s),i+=1;return l})});const Es=Os;var Rs=q(function(e,n){return Nl(Zt(e,n),Zt(n,e))});const Is=Rs;var Ns=he(function(e,n,r){return e(r)?n(r):r});const Fs=Ns,Yn=t=>{const e=localStorage.getItem(t);return e?JSON.parse(e):null},Ls=(t,e)=>(localStorage.setItem(t,JSON.stringify(e)),e),Cs=()=>Yn("favourites"),Bs=t=>Ls("favourites",t),Ps=()=>{var t;return(t=Yn("filters"))!=null?t:{}};var nt=(t=>(t.BUS="BUS",t.TRAM="TRAM",t.RAIL="RAIL",t.SUBWAY="SUBWAY",t.FERRY="FERRY",t))(nt||{});const Ms=t=>`${t}`.length<2?`0${t}`:`${t}`,Us=t=>ds(Ie(Kn(Jn,[0]),t)),Qn=t=>Se(Us(t),Ie(Ms),cs(":")),en=Qn(["getHours","getMinutes","getSeconds"]),Zn=Qn(["getHours","getMinutes"]),xn=()=>Math.floor(new Date().getTime()/1e3),er=$s("id"),qs=()=>({range:400,vehicleTypes:Object.values(nt)}),tr=Ce(),ve=Ce();var In;const tn=Ce((In=Cs())!=null?In:[]),qe=Ce({...qs(),...Ps()}),Ge=Ce([]),zs=jr(Ge,()=>new Date),nn={BUS:"Bussi",TRAM:"Raitiovaunu",RAIL:"Juna",SUBWAY:"Metro",FERRY:"Lautta"},Hs="oma sijainti",Ws=100,nr=2e3,Vs=100,Xs=10,Gs=30*1e3,Js=["Helsinki","Espoo","Vantaa","Kauniainen","Kerava","Sipoo","Tuusula","Siuntio","Kirkkonummi"],Ks=1*60*60,rr=5,Ys=100;async function lr(t,e){try{const n=await fetch(`https://api.digitransit.fi/${t}`,{...e,headers:{...e.headers,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Palvelu palautti virheen");return n.json()}catch{throw new Error("Palveluun ei saatu yhteytt\xE4")}}async function It(t,e){return lr(t,{method:"POST",body:JSON.stringify(e)})}async function sr(t){return lr(t,{method:"GET"})}class Qs extends Error{constructor(e,n){super(e),this.type=n}}class we extends Qs{constructor(e,n=0){super(e,"PositionError"),this.code=n}static from(e){return new we(e.message,e.code)}}const Zs={1:"Sijainnin haku on estetty tai kytketty pois",2:"Sijaintipalveluun ei saatu yhteytt\xE4",3:"Sijainnin haku kesti liian kauan"},rn=t=>t instanceof we?`Paikannus ep\xE4onnistui: ${Zs[t.code]}.`:t.message,xs={enableHighAccuracy:!0,timeout:1*60*1e3};let ze;async function ei(){return new Promise((t,e)=>{ze=navigator.geolocation.watchPosition(n=>{ct(),t(n)},e,xs)})}function ct(){ze&&(navigator.geolocation.clearWatch(ze),ze=null)}async function ti(){if(!navigator.geolocation)throw new we("Selain ei tue paikannusta");if(!ze)try{return(await ei()).coords}catch(t){throw ct(),we.from(t)}throw new Error("Sijainninhaku on jo k\xE4ynniss\xE4")}const ni=Se(Rt([],["features"]),Ie(({geometry:{coordinates:t},properties:e})=>({...e,location:{latitude:t[1],longitude:t[0]}})));async function ir(t,e){var s;const n=encodeURIComponent(t),r=new URLSearchParams({text:n,size:`${Xs}`,lang:"fi","boundary.rect.min_lat":"59.9548","boundary.rect.max_lat":"60.6217","boundary.rect.min_lon":"23.9970","boundary.rect.max_lon":"25.6605",...e&&{"focus.point.lat":`${e.latitude}`,"focus.point.lon":`${e.longitude}`}});try{const l=await sr(`geocoding/v1/search?${r.toString()}`);if(!((s=l.features)!=null&&s.length))throw new Error(`Osoitetta tai paikkaa ei l\xF6ytynyt hakusanalla ${t}`);return ni(l)}catch(l){throw new Error(`Osoitteen haku ep\xE4onnistui: ${l.message}`)}}async function ri({latitude:t,longitude:e}){var r;const n=new URLSearchParams({"point.lat":`${t}`,"point.lon":`${e}`,size:"1"});try{const s=await sr(`/geocoding/v1/reverse?${n.toString()}`);if(!((r=s.features)!=null&&r.length))throw new Error("Osoitetta tai paikkaa ei l\xF6ytynyt");return s.features[0].properties}catch(s){throw new Error(`Osoitteen haku ep\xE4onnistui: ${s.message}`)}}async function ar(){const t=await ti();return{...await ri(t),location:t}}async function li(t){return(await ir(t))[0]}const si=t=>Js.indexOf(t.localadmin)>-1;async function ii(t,e){try{return(await ir(t,e)).filter(si)}catch{return[]}}const ai=(t,e)=>{const n=e?t.indexOf(e):-1,r=n+1>=t.length?0:n+1;return t[r]},oi=(t,e)=>{const n=e?t.indexOf(e):-1,r=[-1,0].indexOf(n)>-1?t.length-1:n-1;return t[r]};function ui(t){let e,n,r,s=t[0].label+"",l,i,a,o=t[0].localadmin+"",u,c,d;return{c(){e=_("li"),n=_("div"),r=_("div"),l=W(s),i=$(),a=_("div"),u=W(o),f(r,"class","suggestion-name space-xxs space-keep-b svelte-1hw6cip"),f(a,"class","suggestion-locality color-gray svelte-1hw6cip"),f(n,"class","space-xs space-clear-tb svelte-1hw6cip"),f(e,"class","suggestions-list-item bg-white border-thin-light space-xs pointer svelte-1hw6cip"),f(e,"tabindex","-1"),f(e,"role","option"),f(e,"aria-selected",t[1])},m(p,m){w(p,e,m),g(e,n),g(n,r),g(r,l),g(n,i),g(n,a),g(a,u),c||(d=Z(e,"click",t[2]),c=!0)},p(p,[m]){m&1&&s!==(s=p[0].label+"")&&re(l,s),m&1&&o!==(o=p[0].localadmin+"")&&re(u,o),m&2&&f(e,"aria-selected",p[1])},i:V,o:V,d(p){p&&b(e),c=!1,d()}}}function ci(t,e,n){let{suggestion:r}=e,{selected:s=!1}=e;function l(i){Re.call(this,t,i)}return t.$$set=i=>{"suggestion"in i&&n(0,r=i.suggestion),"selected"in i&&n(1,s=i.selected)},[r,s,l]}class fi extends M{constructor(e){super(),P(this,e,ci,ui,L,{suggestion:0,selected:1})}}function ln(t,e,n){const r=t.slice();return r[4]=e[n],r}function sn(t,e){let n,r,s;function l(){return e[3](e[4])}return r=new fi({props:{suggestion:e[4],selected:e[0]&&e[0].id===e[4].id}}),r.$on("click",l),{key:t,first:null,c(){n=lt(),R(r.$$.fragment),this.first=n},m(i,a){w(i,n,a),O(r,i,a),s=!0},p(i,a){e=i;const o={};a&4&&(o.suggestion=e[4]),a&5&&(o.selected=e[0]&&e[0].id===e[4].id),r.$set(o)},i(i){s||(v(r.$$.fragment,i),s=!0)},o(i){k(r.$$.fragment,i),s=!1},d(i){i&&b(n),E(r,i)}}}function di(t){let e,n=[],r=new Map,s,l=t[2];const i=a=>a[4].id;for(let a=0;a<l.length;a+=1){let o=ln(t,l,a),u=i(o);r.set(u,n[a]=sn(u,o))}return{c(){e=_("ol");for(let a=0;a<n.length;a+=1)n[a].c();f(e,"id","suggestions-list"),f(e,"class","full-width position-absolute space-clear-l svelte-1ymkqpr"),f(e,"role","listbox"),f(e,"aria-label","Osoite"),ee(e,"hidden",!t[2].length)},m(a,o){w(a,e,o);for(let u=0;u<n.length;u+=1)n[u].m(e,null);s=!0},p(a,[o]){o&7&&(l=a[2],ie(),n=jt(n,o,i,1,a,l,r,e,St,sn,null,ln),ae()),(!s||o&4)&&ee(e,"hidden",!a[2].length)},i(a){if(!s){for(let o=0;o<l.length;o+=1)v(n[o]);s=!0}},o(a){for(let o=0;o<n.length;o+=1)k(n[o]);s=!1},d(a){a&&b(e);for(let o=0;o<n.length;o+=1)n[o].d()}}}function pi(t,e,n){let{selected:r}=e,{onSelected:s}=e,{suggestions:l=[]}=e;const i=a=>s(a);return t.$$set=a=>{"selected"in a&&n(0,r=a.selected),"onSelected"in a&&n(1,s=a.onSelected),"suggestions"in a&&n(2,l=a.suggestions)},[r,s,l,i]}class gi extends M{constructor(e){super(),P(this,e,pi,di,L,{selected:0,onSelected:1,suggestions:2})}}function mi(t){let e,n,r,s,l,i,a,o,u,c,d,p,m;return c=new gi({props:{suggestions:t[1],selected:t[2],onSelected:t[8]}}),{c(){var h;e=_("form"),n=_("div"),r=_("input"),i=$(),a=_("button"),a.innerHTML='<span class=" svelte-1bnovyj">Hae</span>',o=$(),u=_("div"),R(c.$$.fragment),f(r,"class","flex-full border-thin-light border-clear-right space-s space-clear-r svelte-1bnovyj"),f(r,"type","text"),f(r,"role","combobox"),f(r,"aria-controls","suggestions-list"),f(r,"aria-expanded",s=!!t[1].length),f(r,"aria-activedescendant",l=(h=t[2])==null?void 0:h.id),f(r,"aria-autocomplete","list"),f(r,"aria-haspopup","listbox"),f(r,"aria-label","Hae paikannuksella, osoitteella tai paikannimell\xE4"),f(r,"placeholder","Hae paikannuksella, osoitteella tai paikannimell\xE4..."),f(r,"autocomplete","off"),f(a,"type","submit"),f(a,"class","color-white bg-bus no-border bold svelte-1bnovyj"),f(n,"class","flex-row line-height-xl svelte-1bnovyj"),f(u,"class","suggestions position-relative svelte-1bnovyj"),f(e,"class","svelte-1bnovyj")},m(h,S){w(h,e,S),g(e,n),g(n,r),t[10](r),xe(r,t[0]),g(n,i),g(n,a),g(e,o),g(e,u),O(c,u,null),d=!0,p||(m=[Z(r,"input",t[11]),Z(r,"focus",t[12]),Z(r,"blur",t[5]),Z(r,"input",t[4]),Z(e,"submit",Ct(t[7])),Z(e,"keyup",Ct(t[6]))],p=!0)},p(h,[S]){var T;(!d||S&2&&s!==(s=!!h[1].length))&&f(r,"aria-expanded",s),(!d||S&4&&l!==(l=(T=h[2])==null?void 0:T.id))&&f(r,"aria-activedescendant",l),S&1&&r.value!==h[0]&&xe(r,h[0]);const j={};S&2&&(j.suggestions=h[1]),S&4&&(j.selected=h[2]),c.$set(j)},i(h){d||(v(c.$$.fragment,h),d=!0)},o(h){k(c.$$.fragment,h),d=!1},d(h){h&&b(e),t[10](null),E(c),p=!1,fe(m)}}}function hi(t,e,n){let r,s;ue(t,ve,y=>n(13,r=y)),ue(t,tr,y=>n(14,s=y));let{onSearch:l}=e,i="",a=[],o,u;st(()=>ve.subscribe(y=>{y&&document.activeElement!==u&&n(0,i=y.label)}));function c(){n(1,a=[])}async function d(){n(2,o=void 0),i.length>2?n(1,a=await ii(i,s)):c()}function p(){!i.length&&r&&n(0,i=r.label),setTimeout(c,200)}function m(y){n(2,o=y),y&&n(0,i=y.label)}function h(){const y=oi(a,o);m(y)}function S(){const y=ai(a,o);m(y)}function j({code:y}){switch(y){case"ArrowUp":h();break;case"ArrowDown":S();break;case"Escape":c();break}}function T(){if(c(),o){ve.set(o);return}l(i)}function F(y){m(y),T()}function D(y){et[y?"unshift":"push"](()=>{u=y,n(3,u)})}function z(){i=this.value,n(0,i)}const A=()=>u.select();return t.$$set=y=>{"onSearch"in y&&n(9,l=y.onSearch)},[i,a,o,u,d,p,j,T,F,l,D,z,A]}class _i extends M{constructor(e){super(),P(this,e,hi,mi,L,{onSearch:9})}}const vi="/assets/logo_v3.d2c5d4e7.svg";var an={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function yi(t){var o;let e,n,r;const s=t[7].default,l=de(s,t,t[6],null);let i=[an,t[4],{width:t[2]},{height:t[2]},{stroke:t[1]},{"stroke-width":t[3]},{class:n=`lucide-icon lucide lucide-${t[0]} ${(o=t[5].class)!=null?o:""}`}],a={};for(let u=0;u<i.length;u+=1)a=B(a,i[u]);return{c(){e=x("svg"),l&&l.c(),Pt(e,a)},m(u,c){w(u,e,c),l&&l.m(e,null),r=!0},p(u,[c]){var d;l&&l.p&&(!r||c&64)&&ge(l,s,u,u[6],r?pe(s,u[6],c,null):me(u[6]),null),Pt(e,a=be(i,[an,c&16&&u[4],(!r||c&4)&&{width:u[2]},(!r||c&4)&&{height:u[2]},(!r||c&2)&&{stroke:u[1]},(!r||c&8)&&{"stroke-width":u[3]},(!r||c&33&&n!==(n=`lucide-icon lucide lucide-${u[0]} ${(d=u[5].class)!=null?d:""}`))&&{class:n}]))},i(u){r||(v(l,u),r=!0)},o(u){k(l,u),r=!1},d(u){u&&b(e),l&&l.d(u)}}}function bi(t,e,n){const r=["name","color","size","strokeWidth"];let s=ye(e,r),{$$slots:l={},$$scope:i}=e,{name:a}=e,{color:o="currentColor"}=e,{size:u=24}=e,{strokeWidth:c=2}=e;return t.$$set=d=>{n(5,e=B(B({},e),ne(d))),n(4,s=ye(e,r)),"name"in d&&n(0,a=d.name),"color"in d&&n(1,o=d.color),"size"in d&&n(2,u=d.size),"strokeWidth"in d&&n(3,c=d.strokeWidth),"$$scope"in d&&n(6,i=d.$$scope)},e=ne(e),[a,o,u,c,s,e,i,l]}class Te extends M{constructor(e){super(),P(this,e,bi,yi,L,{name:0,color:1,size:2,strokeWidth:3})}}function wi(t){let e,n,r,s,l,i,a;const o=t[1].default,u=de(o,t,t[2],null);return{c(){e=x("path"),n=$(),r=x("line"),s=$(),l=x("line"),i=$(),u&&u.c(),f(e,"d","m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"),f(r,"x1","12"),f(r,"y1","9"),f(r,"x2","12"),f(r,"y2","13"),f(l,"x1","12"),f(l,"y1","17"),f(l,"x2","12.01"),f(l,"y2","17")},m(c,d){w(c,e,d),w(c,n,d),w(c,r,d),w(c,s,d),w(c,l,d),w(c,i,d),u&&u.m(c,d),a=!0},p(c,d){u&&u.p&&(!a||d&4)&&ge(u,o,c,c[2],a?pe(o,c[2],d,null):me(c[2]),null)},i(c){a||(v(u,c),a=!0)},o(c){k(u,c),a=!1},d(c){c&&b(e),c&&b(n),c&&b(r),c&&b(s),c&&b(l),c&&b(i),u&&u.d(c)}}}function ki(t){let e,n;const r=[{name:"alert-triangle"},t[0]];let s={$$slots:{default:[wi]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)s=B(s,r[l]);return e=new Te({props:s}),{c(){R(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},p(l,[i]){const a=i&1?be(r,[r[0],Ae(l[0])]):{};i&4&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function $i(t,e,n){let{$$slots:r={},$$scope:s}=e;return t.$$set=l=>{n(0,e=B(B({},e),ne(l))),"$$scope"in l&&n(2,s=l.$$scope)},e=ne(e),[e,r,s]}class Si extends M{constructor(e){super(),P(this,e,$i,ki,L,{})}}function ji(t){let e,n,r,s,l;const i=t[1].default,a=de(i,t,t[2],null);return{c(){e=x("circle"),n=$(),r=x("polyline"),s=$(),a&&a.c(),f(e,"cx","12"),f(e,"cy","12"),f(e,"r","10"),f(r,"points","12 6 12 12 16 14")},m(o,u){w(o,e,u),w(o,n,u),w(o,r,u),w(o,s,u),a&&a.m(o,u),l=!0},p(o,u){a&&a.p&&(!l||u&4)&&ge(a,i,o,o[2],l?pe(i,o[2],u,null):me(o[2]),null)},i(o){l||(v(a,o),l=!0)},o(o){k(a,o),l=!1},d(o){o&&b(e),o&&b(n),o&&b(r),o&&b(s),a&&a.d(o)}}}function Ai(t){let e,n;const r=[{name:"clock"},t[0]];let s={$$slots:{default:[ji]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)s=B(s,r[l]);return e=new Te({props:s}),{c(){R(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},p(l,[i]){const a=i&1?be(r,[r[0],Ae(l[0])]):{};i&4&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Ti(t,e,n){let{$$slots:r={},$$scope:s}=e;return t.$$set=l=>{n(0,e=B(B({},e),ne(l))),"$$scope"in l&&n(2,s=l.$$scope)},e=ne(e),[e,r,s]}class Di extends M{constructor(e){super(),P(this,e,Ti,Ai,L,{})}}function Oi(t){let e,n,r,s,l;const i=t[1].default,a=de(i,t,t[2],null);return{c(){e=x("path"),n=$(),r=x("line"),s=$(),a&&a.c(),f(e,"d","M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"),f(r,"x1","4"),f(r,"y1","22"),f(r,"x2","4"),f(r,"y2","15")},m(o,u){w(o,e,u),w(o,n,u),w(o,r,u),w(o,s,u),a&&a.m(o,u),l=!0},p(o,u){a&&a.p&&(!l||u&4)&&ge(a,i,o,o[2],l?pe(i,o[2],u,null):me(o[2]),null)},i(o){l||(v(a,o),l=!0)},o(o){k(a,o),l=!1},d(o){o&&b(e),o&&b(n),o&&b(r),o&&b(s),a&&a.d(o)}}}function Ei(t){let e,n;const r=[{name:"flag"},t[0]];let s={$$slots:{default:[Oi]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)s=B(s,r[l]);return e=new Te({props:s}),{c(){R(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},p(l,[i]){const a=i&1?be(r,[r[0],Ae(l[0])]):{};i&4&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Ri(t,e,n){let{$$slots:r={},$$scope:s}=e;return t.$$set=l=>{n(0,e=B(B({},e),ne(l))),"$$scope"in l&&n(2,s=l.$$scope)},e=ne(e),[e,r,s]}class Ii extends M{constructor(e){super(),P(this,e,Ri,Ei,L,{})}}function Ni(t){let e,n,r,s,l,i,a;const o=t[1].default,u=de(o,t,t[2],null);return{c(){e=x("line"),n=$(),r=x("line"),s=$(),l=x("line"),i=$(),u&&u.c(),f(e,"x1","4"),f(e,"y1","12"),f(e,"x2","20"),f(e,"y2","12"),f(r,"x1","4"),f(r,"y1","6"),f(r,"x2","20"),f(r,"y2","6"),f(l,"x1","4"),f(l,"y1","18"),f(l,"x2","20"),f(l,"y2","18")},m(c,d){w(c,e,d),w(c,n,d),w(c,r,d),w(c,s,d),w(c,l,d),w(c,i,d),u&&u.m(c,d),a=!0},p(c,d){u&&u.p&&(!a||d&4)&&ge(u,o,c,c[2],a?pe(o,c[2],d,null):me(c[2]),null)},i(c){a||(v(u,c),a=!0)},o(c){k(u,c),a=!1},d(c){c&&b(e),c&&b(n),c&&b(r),c&&b(s),c&&b(l),c&&b(i),u&&u.d(c)}}}function Fi(t){let e,n;const r=[{name:"menu"},t[0]];let s={$$slots:{default:[Ni]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)s=B(s,r[l]);return e=new Te({props:s}),{c(){R(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},p(l,[i]){const a=i&1?be(r,[r[0],Ae(l[0])]):{};i&4&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Li(t,e,n){let{$$slots:r={},$$scope:s}=e;return t.$$set=l=>{n(0,e=B(B({},e),ne(l))),"$$scope"in l&&n(2,s=l.$$scope)},e=ne(e),[e,r,s]}class Ci extends M{constructor(e){super(),P(this,e,Li,Fi,L,{})}}function Bi(t){let e,n,r;const s=t[1].default,l=de(s,t,t[2],null);return{c(){e=x("polygon"),n=$(),l&&l.c(),f(e,"points","12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2")},m(i,a){w(i,e,a),w(i,n,a),l&&l.m(i,a),r=!0},p(i,a){l&&l.p&&(!r||a&4)&&ge(l,s,i,i[2],r?pe(s,i[2],a,null):me(i[2]),null)},i(i){r||(v(l,i),r=!0)},o(i){k(l,i),r=!1},d(i){i&&b(e),i&&b(n),l&&l.d(i)}}}function Pi(t){let e,n;const r=[{name:"star"},t[0]];let s={$$slots:{default:[Bi]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)s=B(s,r[l]);return e=new Te({props:s}),{c(){R(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},p(l,[i]){const a=i&1?be(r,[r[0],Ae(l[0])]):{};i&4&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Mi(t,e,n){let{$$slots:r={},$$scope:s}=e;return t.$$set=l=>{n(0,e=B(B({},e),ne(l))),"$$scope"in l&&n(2,s=l.$$scope)},e=ne(e),[e,r,s]}class Ui extends M{constructor(e){super(),P(this,e,Mi,Pi,L,{})}}function qi(t){let e,n,r,s,l,i,a,o,u,c,d;const p=t[1].default,m=de(p,t,t[2],null);return{c(){e=x("path"),n=$(),r=x("path"),s=$(),l=x("path"),i=$(),a=x("line"),o=$(),u=x("line"),c=$(),m&&m.c(),f(e,"d","M3 6h18"),f(r,"d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"),f(l,"d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"),f(a,"x1","10"),f(a,"y1","11"),f(a,"x2","10"),f(a,"y2","17"),f(u,"x1","14"),f(u,"y1","11"),f(u,"x2","14"),f(u,"y2","17")},m(h,S){w(h,e,S),w(h,n,S),w(h,r,S),w(h,s,S),w(h,l,S),w(h,i,S),w(h,a,S),w(h,o,S),w(h,u,S),w(h,c,S),m&&m.m(h,S),d=!0},p(h,S){m&&m.p&&(!d||S&4)&&ge(m,p,h,h[2],d?pe(p,h[2],S,null):me(h[2]),null)},i(h){d||(v(m,h),d=!0)},o(h){k(m,h),d=!1},d(h){h&&b(e),h&&b(n),h&&b(r),h&&b(s),h&&b(l),h&&b(i),h&&b(a),h&&b(o),h&&b(u),h&&b(c),m&&m.d(h)}}}function zi(t){let e,n;const r=[{name:"trash-2"},t[0]];let s={$$slots:{default:[qi]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)s=B(s,r[l]);return e=new Te({props:s}),{c(){R(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},p(l,[i]){const a=i&1?be(r,[r[0],Ae(l[0])]):{};i&4&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Hi(t,e,n){let{$$slots:r={},$$scope:s}=e;return t.$$set=l=>{n(0,e=B(B({},e),ne(l))),"$$scope"in l&&n(2,s=l.$$scope)},e=ne(e),[e,r,s]}class Wi extends M{constructor(e){super(),P(this,e,Hi,zi,L,{})}}function Vi(t){let e,n,r,s,l,i,a;const o=t[1].default,u=de(o,t,t[2],null);return{c(){e=x("circle"),n=$(),r=x("line"),s=$(),l=x("line"),i=$(),u&&u.c(),f(e,"cx","12"),f(e,"cy","12"),f(e,"r","10"),f(r,"x1","15"),f(r,"y1","9"),f(r,"x2","9"),f(r,"y2","15"),f(l,"x1","9"),f(l,"y1","9"),f(l,"x2","15"),f(l,"y2","15")},m(c,d){w(c,e,d),w(c,n,d),w(c,r,d),w(c,s,d),w(c,l,d),w(c,i,d),u&&u.m(c,d),a=!0},p(c,d){u&&u.p&&(!a||d&4)&&ge(u,o,c,c[2],a?pe(o,c[2],d,null):me(c[2]),null)},i(c){a||(v(u,c),a=!0)},o(c){k(u,c),a=!1},d(c){c&&b(e),c&&b(n),c&&b(r),c&&b(s),c&&b(l),c&&b(i),u&&u.d(c)}}}function Xi(t){let e,n;const r=[{name:"x-circle"},t[0]];let s={$$slots:{default:[Vi]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)s=B(s,r[l]);return e=new Te({props:s}),{c(){R(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},p(l,[i]){const a=i&1?be(r,[r[0],Ae(l[0])]):{};i&4&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Gi(t,e,n){let{$$slots:r={},$$scope:s}=e;return t.$$set=l=>{n(0,e=B(B({},e),ne(l))),"$$scope"in l&&n(2,s=l.$$scope)},e=ne(e),[e,r,s]}class Ji extends M{constructor(e){super(),P(this,e,Gi,Xi,L,{})}}function Ki(t){let e,n,r,s,l;const i=t[1].default,a=de(i,t,t[2],null);return{c(){e=x("line"),n=$(),r=x("line"),s=$(),a&&a.c(),f(e,"x1","18"),f(e,"y1","6"),f(e,"x2","6"),f(e,"y2","18"),f(r,"x1","6"),f(r,"y1","6"),f(r,"x2","18"),f(r,"y2","18")},m(o,u){w(o,e,u),w(o,n,u),w(o,r,u),w(o,s,u),a&&a.m(o,u),l=!0},p(o,u){a&&a.p&&(!l||u&4)&&ge(a,i,o,o[2],l?pe(i,o[2],u,null):me(o[2]),null)},i(o){l||(v(a,o),l=!0)},o(o){k(a,o),l=!1},d(o){o&&b(e),o&&b(n),o&&b(r),o&&b(s),a&&a.d(o)}}}function Yi(t){let e,n;const r=[{name:"x"},t[0]];let s={$$slots:{default:[Ki]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)s=B(s,r[l]);return e=new Te({props:s}),{c(){R(e.$$.fragment)},m(l,i){O(e,l,i),n=!0},p(l,[i]){const a=i&1?be(r,[r[0],Ae(l[0])]):{};i&4&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Qi(t,e,n){let{$$slots:r={},$$scope:s}=e;return t.$$set=l=>{n(0,e=B(B({},e),ne(l))),"$$scope"in l&&n(2,s=l.$$scope)},e=ne(e),[e,r,s]}class Zi extends M{constructor(e){super(),P(this,e,Qi,Yi,L,{})}}function xi(t){let e,n,r;return{c(){e=_("div"),f(e,"class","modal svelte-aa8zxc"),ee(e,"visible",t[0])},m(s,l){w(s,e,l),n||(r=Z(e,"click",t[1]),n=!0)},p(s,[l]){l&1&&ee(e,"visible",s[0])},i:V,o:V,d(s){s&&b(e),n=!1,r()}}}function ea(t,e,n){let{isVisible:r=!1}=e;function s(l){Re.call(this,t,l)}return t.$$set=l=>{"isVisible"in l&&n(0,r=l.isVisible)},[r,s]}class ta extends M{constructor(e){super(),P(this,e,ea,xi,L,{isVisible:0})}}const wt={debug:(...t)=>{},error:(...t)=>{}},rt=t=>{try{t.focus()}catch{}},kt=(t,e)=>Fs(Ts(n=>es(n,t),"code"),e),on=Kn(kt,[["Enter","Space"]]);const{document:na}=yr;function ra(t){let e,n,r,s,l,i,a,o,u;r=new ta({props:{isVisible:t[0]}}),r.$on("click",function(){je(t[1])&&t[1].apply(this,arguments)});const c=t[4].default,d=de(c,t,t[3],null);return{c(){e=$(),n=_("div"),R(r.$$.fragment),s=$(),l=_("div"),i=_("div"),d&&d.c(),f(i,"class","bg-white full-height svelte-ronjpg"),f(l,"class","panel svelte-ronjpg"),f(l,"role","dialog"),f(l,"tabindex","0"),f(l,"aria-label",t[2]),f(l,"aria-modal",!0),f(n,"class","drawer svelte-ronjpg"),ee(n,"visible",t[0])},m(p,m){w(p,e,m),w(p,n,m),O(r,n,null),g(n,s),g(n,l),g(l,i),d&&d.m(i,null),a=!0,o||(u=Z(na.body,"keyup",function(){je(t[0]?kt(["Escape"],t[1]):void 0)&&(t[0]?kt(["Escape"],t[1]):void 0).apply(this,arguments)}),o=!0)},p(p,[m]){t=p;const h={};m&1&&(h.isVisible=t[0]),r.$set(h),d&&d.p&&(!a||m&8)&&ge(d,c,t,t[3],a?pe(c,t[3],m,null):me(t[3]),null),(!a||m&4)&&f(l,"aria-label",t[2]),(!a||m&1)&&ee(n,"visible",t[0])},i(p){a||(v(r.$$.fragment,p),v(d,p),a=!0)},o(p){k(r.$$.fragment,p),k(d,p),a=!1},d(p){p&&b(e),p&&b(n),E(r),d&&d.d(p),o=!1,u()}}}function la(t,e,n){let{$$slots:r={},$$scope:s}=e,{isVisible:l=!1}=e,{close:i}=e,{label:a}=e;return t.$$set=o=>{"isVisible"in o&&n(0,l=o.isVisible),"close"in o&&n(1,i=o.close),"label"in o&&n(2,a=o.label),"$$scope"in o&&n(3,s=o.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&(l?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"))},[l,i,a,s,r]}class sa extends M{constructor(e){super(),P(this,e,la,ra,L,{isVisible:0,close:1,label:2})}}function un(t){let e;return{c(){e=_("span"),e.innerHTML=`<span aria-hidden="true" class="svelte-oxmtir">\u25B8</span> 
        <span class="sr-only svelte-oxmtir">Valittu</span>`,f(e,"class","text-l bold svelte-oxmtir")},m(n,r){w(n,e,r)},d(n){n&&b(e)}}}function ia(t){let e,n,r,s=t[0].label+"",l,i,a,o,u,c,d,p=t[2]&&un();return o=new Wi({props:{class:"vertical-bottom",size:24,strokeWidth:1.5}}),{c(){e=_("li"),n=_("button"),p&&p.c(),r=$(),l=W(s),i=$(),a=_("button"),R(o.$$.fragment),f(n,"class","align-left flex-full svelte-oxmtir"),f(a,"aria-label","Poista suosikeista"),f(a,"class","svelte-oxmtir"),f(e,"class","no-wrap flex-row flex-align-center space-s space-clear-rl svelte-oxmtir")},m(m,h){w(m,e,h),g(e,n),p&&p.m(n,null),g(n,r),g(n,l),g(e,i),g(e,a),O(o,a,null),u=!0,c||(d=[Z(a,"click",function(){je(t[1])&&t[1].apply(this,arguments)}),Z(e,"click",t[3])],c=!0)},p(m,[h]){t=m,t[2]?p||(p=un(),p.c(),p.m(n,r)):p&&(p.d(1),p=null),(!u||h&1)&&s!==(s=t[0].label+"")&&re(l,s)},i(m){u||(v(o.$$.fragment,m),u=!0)},o(m){k(o.$$.fragment,m),u=!1},d(m){m&&b(e),p&&p.d(),E(o),c=!1,fe(d)}}}function aa(t,e,n){let{favourite:r}=e,{removeFavourite:s}=e,{isSelected:l}=e;function i(a){Re.call(this,t,a)}return t.$$set=a=>{"favourite"in a&&n(0,r=a.favourite),"removeFavourite"in a&&n(1,s=a.removeFavourite),"isSelected"in a&&n(2,l=a.isSelected)},[r,s,l,i]}class oa extends M{constructor(e){super(),P(this,e,aa,ia,L,{favourite:0,removeFavourite:1,isSelected:2})}}function cn(t,e,n){const r=t.slice();return r[6]=e[n],r}function fn(t,e){var a;let n,r,s;function l(){return e[4](e[6])}function i(){return e[5](e[6])}return r=new oa({props:{favourite:e[6],isSelected:e[6].id===((a=e[3])==null?void 0:a.id),removeFavourite:l}}),r.$on("click",i),{key:t,first:null,c(){n=lt(),R(r.$$.fragment),this.first=n},m(o,u){w(o,n,u),O(r,o,u),s=!0},p(o,u){var d;e=o;const c={};u&1&&(c.favourite=e[6]),u&9&&(c.isSelected=e[6].id===((d=e[3])==null?void 0:d.id)),u&3&&(c.removeFavourite=l),r.$set(c)},i(o){s||(v(r.$$.fragment,o),s=!0)},o(o){k(r.$$.fragment,o),s=!1},d(o){o&&b(n),E(r,o)}}}function dn(t){let e,n,r,s,l,i,a,o;return i=new Si({props:{size:16}}),{c(){e=_("li"),n=_("div"),n.textContent="Et ole viel\xE4 lis\xE4nnyt suosikkeja!",r=$(),s=_("div"),l=_("span"),R(i.$$.fragment),a=W(`
        Huomioithan, ett\xE4 suosikit tallentuvat paikallisesti, joten ne ovat hy\xF6dynnett\xE4viss\xE4
        vain samalla selaimella ja laitteella, johon ne on tallennettu.`),f(n,"class","space-xs space-keep-b"),f(l,"class","space-xxs space-keep-r"),f(s,"class","text-s"),f(e,"class","align-left space-m space-keep-t")},m(u,c){w(u,e,c),g(e,n),g(e,r),g(e,s),g(s,l),O(i,l,null),g(s,a),o=!0},i(u){o||(v(i.$$.fragment,u),o=!0)},o(u){k(i.$$.fragment,u),o=!1},d(u){u&&b(e),E(i)}}}function ua(t){let e,n=[],r=new Map,s,l,i=t[0];const a=u=>u[6].id;for(let u=0;u<i.length;u+=1){let c=cn(t,i,u),d=a(c);r.set(d,n[u]=fn(d,c))}let o=!t[0].length&&dn();return{c(){e=_("ul");for(let u=0;u<n.length;u+=1)n[u].c();s=$(),o&&o.c(),f(e,"class","color-black")},m(u,c){w(u,e,c);for(let d=0;d<n.length;d+=1)n[d].m(e,null);g(e,s),o&&o.m(e,null),l=!0},p(u,[c]){c&15&&(i=u[0],ie(),n=jt(n,c,a,1,u,i,r,e,St,fn,s,cn),ae()),u[0].length?o&&(ie(),k(o,1,1,()=>{o=null}),ae()):o?c&1&&v(o,1):(o=dn(),o.c(),v(o,1),o.m(e,null))},i(u){if(!l){for(let c=0;c<i.length;c+=1)v(n[c]);v(o),l=!0}},o(u){for(let c=0;c<n.length;c+=1)k(n[c]);k(o),l=!1},d(u){u&&b(e);for(let c=0;c<n.length;c+=1)n[c].d();o&&o.d()}}}function ca(t,e,n){let r;ue(t,ve,u=>n(3,r=u));let{favourites:s=[]}=e,{removeFromFavourites:l}=e,{selectFavourite:i}=e;const a=u=>l(u),o=u=>i(u);return t.$$set=u=>{"favourites"in u&&n(0,s=u.favourites),"removeFromFavourites"in u&&n(1,l=u.removeFromFavourites),"selectFavourite"in u&&n(2,i=u.selectFavourite)},[s,l,i,r,a,o]}class fa extends M{constructor(e){super(),P(this,e,ca,ua,L,{favourites:0,removeFromFavourites:1,selectFavourite:2})}}const da=(t,e)=>e&&!!t.find(er(e.id));function pa(t){let e,n,r,s,l,i,a,o,u,c,d,p,m,h,S,j,T,F,D,z,A;return l=new Ui({props:{size:32,fill:t[3]?"#fff":"none"}}),d=new Zi({props:{size:32}}),F=new fa({props:{favourites:t[1],removeFromFavourites:t[5],selectFavourite:t[6]}}),{c(){e=_("div"),n=_("div"),r=_("span"),s=_("button"),R(l.$$.fragment),u=$(),c=_("button"),R(d.$$.fragment),p=$(),m=_("h2"),m.textContent="Omat suosikit",h=$(),S=_("div"),S.innerHTML=`<div class="triangle centering-margin svelte-uz6ck2"></div> 
  <div class="triangle-shadow centering-margin svelte-uz6ck2"></div>`,j=$(),T=_("div"),R(F.$$.fragment),f(s,"aria-label",i=t[3]?"Poista t\xE4m\xE4n hetkinen osoite suosikeista":"Lis\xE4\xE4 t\xE4m\xE4n hetkinen osoite suosikkeihin"),f(s,"aria-pressed",a=!!t[3]),s.disabled=o=!t[2],f(s,"class","svelte-uz6ck2"),f(r,"class","space-xs space-keep-r svelte-uz6ck2"),f(c,"aria-label","Sulje"),f(c,"class","svelte-uz6ck2"),f(n,"class","flex-row flex-justify-end flex-align-center text-xxl svelte-uz6ck2"),f(m,"class","font-heading align-center space-s space-clear-rl svelte-uz6ck2"),f(e,"class","drawer-header color-white bg-bus space-s svelte-uz6ck2"),f(S,"class","triangle-container svelte-uz6ck2"),f(T,"class","flex-column flex-full space-s space-clear-t svelte-uz6ck2")},m(y,I){w(y,e,I),g(e,n),g(n,r),g(r,s),O(l,s,null),g(n,u),g(n,c),O(d,c,null),g(e,p),g(e,m),w(y,h,I),w(y,S,I),w(y,j,I),w(y,T,I),O(F,T,null),D=!0,z||(A=[Z(s,"click",t[4]),Z(c,"click",function(){je(t[0])&&t[0].apply(this,arguments)})],z=!0)},p(y,[I]){t=y;const X={};I&8&&(X.fill=t[3]?"#fff":"none"),l.$set(X),(!D||I&8&&i!==(i=t[3]?"Poista t\xE4m\xE4n hetkinen osoite suosikeista":"Lis\xE4\xE4 t\xE4m\xE4n hetkinen osoite suosikkeihin"))&&f(s,"aria-label",i),(!D||I&8&&a!==(a=!!t[3]))&&f(s,"aria-pressed",a),(!D||I&4&&o!==(o=!t[2]))&&(s.disabled=o);const N={};I&2&&(N.favourites=t[1]),F.$set(N)},i(y){D||(v(l.$$.fragment,y),v(d.$$.fragment,y),v(F.$$.fragment,y),D=!0)},o(y){k(l.$$.fragment,y),k(d.$$.fragment,y),k(F.$$.fragment,y),D=!1},d(y){y&&b(e),E(l),E(d),y&&b(h),y&&b(S),y&&b(j),y&&b(T),E(F),z=!1,fe(A)}}}function ga(t,e,n){let r,s,l;ue(t,tn,p=>n(1,s=p)),ue(t,ve,p=>n(2,l=p));let{close:i}=e;function a(){l&&(r?u(l):o(l))}function o(p){c([...s,p])}function u(p){const m=ut(er(p.id),s);c(m)}function c(p){Bs(p),tn.set(p)}function d(p){ve.set(p),i()}return t.$$set=p=>{"close"in p&&n(0,i=p.close)},t.$$.update=()=>{t.$$.dirty&6&&n(3,r=da(s,l))},[i,s,l,r,a,u,d]}class ma extends M{constructor(e){super(),P(this,e,ga,pa,L,{close:0})}}function ha(t){let e,n;return e=new ma({props:{close:t[1]}}),{c(){R(e.$$.fragment)},m(r,s){O(e,r,s),n=!0},p:V,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){E(e,r)}}}function _a(t){let e,n,r,s,l,i,a,o,u;return s=new Ci({props:{size:36,strokeWidth:2.5}}),i=new sa({props:{isVisible:t[0],close:t[1],label:"Omat suosikit",$$slots:{default:[ha]},$$scope:{ctx:t}}}),{c(){e=_("div"),n=_("button"),r=_("div"),R(s.$$.fragment),l=$(),R(i.$$.fragment),f(r,"class","menu-icon svelte-8f43v"),ee(r,"pressed",t[0]),f(n,"aria-label","Omat suosikit"),f(n,"class","svelte-8f43v"),f(e,"class","svelte-8f43v")},m(c,d){w(c,e,d),g(e,n),g(n,r),O(s,r,null),g(e,l),O(i,e,null),a=!0,o||(u=Z(n,"click",t[1]),o=!0)},p(c,[d]){(!a||d&1)&&ee(r,"pressed",c[0]);const p={};d&1&&(p.isVisible=c[0]),d&4&&(p.$$scope={dirty:d,ctx:c}),i.$set(p)},i(c){a||(v(s.$$.fragment,c),v(i.$$.fragment,c),a=!0)},o(c){k(s.$$.fragment,c),k(i.$$.fragment,c),a=!1},d(c){c&&b(e),E(s),E(i),o=!1,u()}}}function va(t,e,n){let r=!1;function s(){n(0,r=!r)}return[r,s]}class ya extends M{constructor(e){super(),P(this,e,va,_a,L,{})}}function ba(t){let e,n,r,s,l,i,a,o,u,c,d,p,m,h;return m=new ya({}),{c(){e=_("header"),n=_("div"),r=_("div"),s=_("h1"),l=_("div"),i=_("img"),o=$(),u=_("span"),u.textContent="julkisilla.info",c=$(),d=_("p"),d.textContent="L\xF6yd\xE4 l\xE4himm\xE4t julkisen liikenteen l\xE4hd\xF6t helposti",p=$(),R(m.$$.fragment),f(i,"class","app-logo drop-shadow svelte-jszaao"),Fn(i.src,a=vi)||f(i,"src",a),f(i,"alt",""),f(i,"width","40"),f(i,"height","40"),f(l,"class","space-xs space-keep-r svelte-jszaao"),f(u,"class","app-name font-heading lowercase svelte-jszaao"),f(s,"class","flex-full no-wrap flex-row flex-align-center svelte-jszaao"),f(d,"class","app-description text-s line-height-xs space-xs space-keep-b svelte-jszaao"),f(r,"class","heading-container flex-column flex-full no-wrap svelte-jszaao"),f(n,"class","header-content flex-row flex-align-center centering-margin max-content-width space-s space-clear-tb svelte-jszaao"),f(e,"class","bg-bus color-white svelte-jszaao")},m(S,j){w(S,e,j),g(e,n),g(n,r),g(r,s),g(s,l),g(l,i),g(s,o),g(s,u),g(r,c),g(r,d),g(n,p),O(m,n,null),h=!0},p:V,i(S){h||(v(m.$$.fragment,S),h=!0)},o(S){k(m.$$.fragment,S),h=!1},d(S){S&&b(e),E(m)}}}class wa extends M{constructor(e){super(),P(this,e,null,ba,L,{})}}const ka="/assets/spinner.6635add5.svg";function $a(t){let e,n,r,s;return{c(){e=_("div"),n=_("img"),f(n,"class","spinner svelte-r5g0vb"),Fn(n.src,r=ka)||f(n,"src",r),f(n,"alt","spinner"),f(e,"class",s=$e(`loading-overlay fill-parent ${t[1].class}`)+" svelte-r5g0vb"),f(e,"role","dialog"),f(e,"aria-busy",t[0]),ht(e,"display",t[0]?"block":"none",!1)},m(l,i){w(l,e,i),g(e,n)},p(l,[i]){i&2&&s!==(s=$e(`loading-overlay fill-parent ${l[1].class}`)+" svelte-r5g0vb")&&f(e,"class",s),i&1&&f(e,"aria-busy",l[0]),i&1&&ht(e,"display",l[0]?"block":"none",!1)},i:V,o:V,d(l){l&&b(e)}}}function Sa(t,e,n){const r=["show"];let s=ye(e,r),{show:l=!1}=e;return t.$$set=i=>{e=B(B({},e),ne(i)),n(1,s=ye(e,r)),"show"in i&&n(0,l=i.show)},[l,s]}class ja extends M{constructor(e){super(),P(this,e,Sa,$a,L,{show:0})}}function Aa(t){let e,n,r,s,l,i;const a=t[3].default,o=de(a,t,t[2],null);let u=[t[1],{href:t[0]},{target:"_blank"},{rel:"noopener"}],c={};for(let d=0;d<u.length;d+=1)c=B(c,u[d]);return{c(){e=_("a"),o&&o.c(),n=$(),r=_("span"),r.textContent="Avautuu uuteen v\xE4lilehteen",f(r,"class","sr-only"),Bt(e,c)},m(d,p){w(d,e,p),o&&o.m(e,null),g(e,n),g(e,r),s=!0,l||(i=Z(e,"click",dr(t[4])),l=!0)},p(d,[p]){o&&o.p&&(!s||p&4)&&ge(o,a,d,d[2],s?pe(a,d[2],p,null):me(d[2]),null),Bt(e,c=be(u,[p&2&&d[1],(!s||p&1)&&{href:d[0]},{target:"_blank"},{rel:"noopener"}]))},i(d){s||(v(o,d),s=!0)},o(d){k(o,d),s=!1},d(d){d&&b(e),o&&o.d(d),l=!1,i()}}}function Ta(t,e,n){const r=["href"];let s=ye(e,r),{$$slots:l={},$$scope:i}=e,{href:a}=e;function o(u){Re.call(this,t,u)}return t.$$set=u=>{e=B(B({},e),ne(u)),n(1,s=ye(e,r)),"href"in u&&n(0,a=u.href),"$$scope"in u&&n(2,i=u.$$scope)},[a,s,i,l,o]}class ft extends M{constructor(e){super(),P(this,e,Ta,Aa,L,{href:0})}}const Da=t=>Math.round(t/1e3*10)/10;function pn(t){return Number.isFinite(t)?Math.round(t)>=1e3?`${Da(t)} km`:`${Math.round(t)} m`:""}const Oa=Ll((t,e)=>e.distance<=t.range&&e.realtimeDeparture>=xn()&&t.vehicleTypes.includes(e.vehicleType)),Ea=(t,e)=>e.filter(Oa(t)),gn="/assets/vehicle_icons.64377842.svg";function Ra(t){let e,n,r,s,l,i;return{c(){e=x("svg"),n=x("title"),r=W(t[1]),s=x("use"),f(n,"class","svelte-1y9h793"),f(s,"href",l=`${gn}#icon-icon_${t[0]}`),f(s,"class","svelte-1y9h793"),ht(s,"fill","currentColor",!1),f(e,"class",i="vehicle-icon "+t[3].class+" svelte-1y9h793"),f(e,"viewBox","0 0 100 100"),f(e,"focusable","false"),ee(e,"shadow",t[2])},m(a,o){w(a,e,o),g(e,n),g(n,r),g(e,s)},p(a,[o]){o&2&&re(r,a[1]),o&1&&l!==(l=`${gn}#icon-icon_${a[0]}`)&&f(s,"href",l),o&8&&i!==(i="vehicle-icon "+a[3].class+" svelte-1y9h793")&&f(e,"class",i),o&12&&ee(e,"shadow",a[2])},i:V,o:V,d(a){a&&b(e)}}}function Ia(t,e,n){const r=["icon","alt","shadow"];let s=ye(e,r),{icon:l}=e,{alt:i}=e,{shadow:a=!1}=e;return t.$$set=o=>{e=B(B({},e),ne(o)),n(3,s=ye(e,r)),"icon"in o&&n(0,l=o.icon),"alt"in o&&n(1,i=o.alt),"shadow"in o&&n(2,a=o.shadow)},[l,i,a,s]}class or extends M{constructor(e){super(),P(this,e,Ia,Ra,L,{icon:0,alt:1,shadow:2})}}function Na(t){let e,n,r,s,l,i,a,o;return n=new or({props:{icon:t[1].toLowerCase(),alt:t[2]}}),{c(){e=_("span"),R(n.$$.fragment),r=$(),s=_("span"),l=W(t[0]),f(s,"class",i=`space-xxs space-keep-l color-${t[1].toLowerCase()}`),f(e,"class",a=t[1].toLowerCase())},m(u,c){w(u,e,c),O(n,e,null),g(e,r),g(e,s),g(s,l),o=!0},p(u,[c]){const d={};c&2&&(d.icon=u[1].toLowerCase()),c&4&&(d.alt=u[2]),n.$set(d),(!o||c&1)&&re(l,u[0]),(!o||c&2&&i!==(i=`space-xxs space-keep-l color-${u[1].toLowerCase()}`))&&f(s,"class",i),(!o||c&2&&a!==(a=u[1].toLowerCase()))&&f(e,"class",a)},i(u){o||(v(n.$$.fragment,u),o=!0)},o(u){k(n.$$.fragment,u),o=!1},d(u){u&&b(e),E(n)}}}function Fa(t,e,n){let{routeName:r}=e,{vehicleType:s}=e,{alt:l}=e;return t.$$set=i=>{"routeName"in i&&n(0,r=i.routeName),"vehicleType"in i&&n(1,s=i.vehicleType),"alt"in i&&n(2,l=i.alt)},[r,s,l]}class La extends M{constructor(e){super(),P(this,e,Fa,Na,L,{routeName:0,vehicleType:1,alt:2})}}function mn(t,e,n){const r=t.slice();return r[1]=e[n],r}function hn(t){let e,n=t[1].alertHeaderText+"",r;return{c(){e=_("h3"),r=W(n),f(e,"class","space-xs space-keep-b")},m(s,l){w(s,e,l),g(e,r)},p(s,l){l&1&&n!==(n=s[1].alertHeaderText+"")&&re(r,n)},d(s){s&&b(e)}}}function _n(t){let e,n;return e=new ft({props:{class:"disruption-alert-additional-info underline",href:t[1].alertUrl,$$slots:{default:[Ca]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,s){O(e,r,s),n=!0},p(r,s){const l={};s&1&&(l.href=r[1].alertUrl),s&16&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){E(e,r)}}}function Ca(t){let e;return{c(){e=W("Lis\xE4tietoja")},m(n,r){w(n,e,r)},d(n){n&&b(e)}}}function vn(t){let e,n,r,s=t[1].alertDescriptionText+"",l,i,a,o,u=t[1].alertHeaderText&&hn(t),c=t[1].alertUrl&&_n(t);return{c(){e=_("div"),u&&u.c(),n=$(),r=_("p"),l=W(s),i=$(),c&&c.c(),a=$(),f(r,"class","alert-info-body"),f(e,"class","space-s space-clear-rl")},m(d,p){w(d,e,p),u&&u.m(e,null),g(e,n),g(e,r),g(r,l),g(r,i),c&&c.m(r,null),g(e,a),o=!0},p(d,p){d[1].alertHeaderText?u?u.p(d,p):(u=hn(d),u.c(),u.m(e,n)):u&&(u.d(1),u=null),(!o||p&1)&&s!==(s=d[1].alertDescriptionText+"")&&re(l,s),d[1].alertUrl?c?(c.p(d,p),p&1&&v(c,1)):(c=_n(d),c.c(),v(c,1),c.m(r,null)):c&&(ie(),k(c,1,1,()=>{c=null}),ae())},i(d){o||(v(c),o=!0)},o(d){k(c),o=!1},d(d){d&&b(e),u&&u.d(),c&&c.d()}}}function Ba(t){let e,n,r=xt(ce("effectiveStartDate"),t[0]),s=[];for(let i=0;i<r.length;i+=1)s[i]=vn(mn(t,r,i));const l=i=>k(s[i],1,1,()=>{s[i]=null});return{c(){e=_("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","alert-info color-alert align-left full-width bg-light-red space-s space-clear-tb")},m(i,a){w(i,e,a);for(let o=0;o<s.length;o+=1)s[o].m(e,null);n=!0},p(i,[a]){if(a&1){r=xt(ce("effectiveStartDate"),i[0]);let o;for(o=0;o<r.length;o+=1){const u=mn(i,r,o);s[o]?(s[o].p(u,a),v(s[o],1)):(s[o]=vn(u),s[o].c(),v(s[o],1),s[o].m(e,null))}for(ie(),o=r.length;o<s.length;o+=1)l(o);ae()}},i(i){if(!n){for(let a=0;a<r.length;a+=1)v(s[a]);n=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)k(s[a]);n=!1},d(i){i&&b(e),$t(s,i)}}}function Pa(t,e,n){let{disruptions:r=[]}=e;return t.$$set=s=>{"disruptions"in s&&n(0,r=s.disruptions)},[r]}class Ma extends M{constructor(e){super(),P(this,e,Pa,Ba,L,{disruptions:0})}}function Ua(t){let e;return{c(){e=_("span"),e.textContent=`${Zn(t[3])}`},m(n,r){w(n,e,r)},p:V,d(n){n&&b(e)}}}function qa(t){let e,n=t[4](t[2])+"",r;return{c(){e=_("span"),r=W(n),ee(e,"bold",t[2]<1)},m(s,l){w(s,e,l),g(e,r)},p(s,l){l&4&&n!==(n=s[4](s[2])+"")&&re(r,n),l&4&&ee(e,"bold",s[2]<1)},d(s){s&&b(e)}}}function za(t){let e,n;function r(i,a){return i[1]?qa:Ua}let s=r(t),l=s(t);return{c(){e=_("span"),l.c(),f(e,"class",n=t[5].class),ee(e,"color-light-green",t[0])},m(i,a){w(i,e,a),l.m(e,null)},p(i,[a]){s===(s=r(i))&&l?l.p(i,a):(l.d(1),l=s(i),l&&(l.c(),l.m(e,null))),a&32&&n!==(n=i[5].class)&&f(e,"class",n),a&33&&ee(e,"color-light-green",i[0])},i:V,o:V,d(i){i&&b(e),l.d()}}}function Ha(t,e,n){let r;const s=["time","now","isRealtime","relative"];let l=ye(e,s),{time:i}=e,{now:a}=e,{isRealtime:o=!1}=e,{relative:u=!1}=e;const c=new Date(i*1e3);function d(p){return p<1?"Nyt":p>=10?Zn(c):`${p} min`}return t.$$set=p=>{e=B(B({},e),ne(p)),n(5,l=ye(e,s)),"time"in p&&n(6,i=p.time),"now"in p&&n(7,a=p.now),"isRealtime"in p&&n(0,o=p.isRealtime),"relative"in p&&n(1,u=p.relative)},t.$$.update=()=>{t.$$.dirty&128&&n(2,r=Math.floor((c.getTime()-a)/1e3/60))},[o,u,r,c,d,l,i,a]}class Nt extends M{constructor(e){super(),P(this,e,Ha,za,L,{time:6,now:7,isRealtime:0,relative:1})}}function yn(t){let e,n,r,s;return n=new Nt({props:{time:t[0].realtimeDeparture,class:"bold",isRealtime:!0}}),{c(){e=_("div"),R(n.$$.fragment),r=W(" (arvioitu)")},m(l,i){w(l,e,i),O(n,e,null),g(e,r),s=!0},p(l,i){const a={};i&1&&(a.time=l[0].realtimeDeparture),n.$set(a)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){k(n.$$.fragment,l),s=!1},d(l){l&&b(e),E(n)}}}function Wa(t){let e=t[0].stopName+"",n;return{c(){n=W(e)},m(r,s){w(r,n,s)},p(r,s){s&1&&e!==(e=r[0].stopName+"")&&re(n,e)},d(r){r&&b(n)}}}function bn(t){let e,n;return e=new Ma({props:{disruptions:t[1]}}),{c(){R(e.$$.fragment)},m(r,s){O(e,r,s),n=!0},p(r,s){const l={};s&2&&(l.disruptions=r[1]),e.$set(l)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){E(e,r)}}}function Va(t){let e,n,r,s,l,i,a,o,u,c,d,p,m,h,S,j,T,F,D,z=t[0].stopCode+"",A,y,I,X=t[0].stopDescription+"",N,K,Y,U,C,oe,_e,H;l=new Di({});let G=t[0].realtime&&yn(t);u=new Nt({props:{time:t[0].scheduledDeparture}}),h=new Ii({}),T=new ft({props:{class:"bold underline block",href:t[0].stopUrl,$$slots:{default:[Wa]},$$scope:{ctx:t}}});let te=t[1].length&&bn(t);return{c(){e=_("div"),n=_("div"),r=_("div"),s=_("span"),R(l.$$.fragment),i=$(),a=_("div"),G&&G.c(),o=$(),R(u.$$.fragment),c=W(" (aikataulu)"),d=$(),p=_("div"),m=_("span"),R(h.$$.fragment),S=$(),j=_("div"),R(T.$$.fragment),F=$(),D=_("span"),A=W(z),y=$(),I=_("span"),N=W(X),K=$(),Y=_("div"),U=_("button"),U.innerHTML='<span class="underline">Sulje</span>',C=$(),te&&te.c(),f(s,"class","space-s space-keep-r"),f(a,"class","space-xs space-keep-b no-wrap"),f(r,"class","flex-row flex-align-center space-m space-keep-r"),f(m,"class","space-s space-keep-r"),f(D,"class","text-s color-gray-dark space-xxs space-clear-tb corner-rounded border-thin-light vertical-top"),f(I,"class","space-xs space-keep-l"),f(j,"class","space-xs space-keep-b"),f(p,"class","flex-row flex-align-center no-wrap"),f(U,"class","flex-full align-right"),f(Y,"class","flex-full align-right"),f(n,"class","space-xs space-clear-r flex-row flex-wrap line-height-l"),f(e,"tabindex","0")},m(J,se){w(J,e,se),g(e,n),g(n,r),g(r,s),O(l,s,null),g(r,i),g(r,a),G&&G.m(a,null),g(a,o),O(u,a,null),g(a,c),g(n,d),g(n,p),g(p,m),O(h,m,null),g(p,S),g(p,j),O(T,j,null),g(j,F),g(j,D),g(D,A),g(j,y),g(j,I),g(I,N),g(n,K),g(n,Y),g(Y,U),g(n,C),te&&te.m(n,null),t[5](e),oe=!0,_e||(H=Z(U,"click",t[4]),_e=!0)},p(J,[se]){J[0].realtime?G?(G.p(J,se),se&1&&v(G,1)):(G=yn(J),G.c(),v(G,1),G.m(a,o)):G&&(ie(),k(G,1,1,()=>{G=null}),ae());const Ft={};se&1&&(Ft.time=J[0].scheduledDeparture),u.$set(Ft);const dt={};se&1&&(dt.href=J[0].stopUrl),se&129&&(dt.$$scope={dirty:se,ctx:J}),T.$set(dt),(!oe||se&1)&&z!==(z=J[0].stopCode+"")&&re(A,z),(!oe||se&1)&&X!==(X=J[0].stopDescription+"")&&re(N,X),J[1].length?te?(te.p(J,se),se&2&&v(te,1)):(te=bn(J),te.c(),v(te,1),te.m(n,null)):te&&(ie(),k(te,1,1,()=>{te=null}),ae())},i(J){oe||(v(l.$$.fragment,J),v(G),v(u.$$.fragment,J),v(h.$$.fragment,J),v(T.$$.fragment,J),v(te),oe=!0)},o(J){k(l.$$.fragment,J),k(G),k(u.$$.fragment,J),k(h.$$.fragment,J),k(T.$$.fragment,J),k(te),oe=!1},d(J){J&&b(e),E(l),G&&G.d(),E(u),E(h),E(T),te&&te.d(),t[5](null),_e=!1,H()}}}function Xa(t,e,n){let{departure:r}=e,{disruptions:s=[]}=e,{onRowToggle:l}=e,i,a;st(()=>(i=document.activeElement,rt(a),()=>{rt(i)}));const o=()=>l(r.id);function u(c){et[c?"unshift":"push"](()=>{a=c,n(3,a)})}return t.$$set=c=>{"departure"in c&&n(0,r=c.departure),"disruptions"in c&&n(1,s=c.disruptions),"onRowToggle"in c&&n(2,l=c.onRowToggle)},[r,s,l,a,o,u]}class Ga extends M{constructor(e){super(),P(this,e,Xa,Va,L,{departure:0,disruptions:1,onRowToggle:2})}}function Ja(t){let e,n;return e=new La({props:{vehicleType:t[0].vehicleType,routeName:t[0].routeName,alt:`N\xE4yt\xE4 linjan tiedot suuntaan ${t[0].destination}`}}),{c(){R(e.$$.fragment)},m(r,s){O(e,r,s),n=!0},p(r,s){const l={};s&1&&(l.vehicleType=r[0].vehicleType),s&1&&(l.routeName=r[0].routeName),s&1&&(l.alt=`N\xE4yt\xE4 linjan tiedot suuntaan ${r[0].destination}`),e.$set(l)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){E(e,r)}}}function wn(t){let e;return{c(){e=_("span"),e.textContent="\u26A0",f(e,"aria-label","Linjalla h\xE4iri\xF6it\xE4: Avaa l\xE4hd\xF6n tiedot n\xE4hd\xE4ksesi lis\xE4tietoja"),f(e,"class","color-alert alert-icon bold space-xs space-keep-r svelte-1hey8y0")},m(n,r){w(n,e,r)},d(n){n&&b(e)}}}function kn(t){let e,n;return e=new Ga({props:{departure:t[0],disruptions:t[2],onRowToggle:t[4]}}),{c(){R(e.$$.fragment)},m(r,s){O(e,r,s),n=!0},p(r,s){const l={};s&1&&(l.departure=r[0]),s&4&&(l.disruptions=r[2]),s&16&&(l.onRowToggle=r[4]),e.$set(l)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){E(e,r)}}}function Ka(t){var Y;let e,n,r,s,l,i,a,o,u,c,d=t[0].destination+"",p,m,h,S=pn(t[0].distance)+"",j,T,F,D,z,A,y,I,X;s=new Nt({props:{now:t[3],time:t[0].realtimeDeparture,isRealtime:t[0].realtime,relative:!0}}),a=new ft({props:{href:t[0].routeUrl,$$slots:{default:[Ja]},$$scope:{ctx:t}}});let N=((Y=t[2])==null?void 0:Y.length)&&wn(),K=t[1]&&kn(t);return{c(){e=_("div"),n=_("div"),r=_("div"),R(s.$$.fragment),l=$(),i=_("div"),R(a.$$.fragment),o=$(),u=_("div"),N&&N.c(),c=$(),p=W(d),m=$(),h=_("div"),j=W(S),F=$(),D=_("div"),z=_("div"),K&&K.c(),f(r,"role","cell"),f(r,"class","realtimeDeparture svelte-1hey8y0"),f(i,"role","cell"),f(i,"class","routeName bold overflow-hidden no-wrap svelte-1hey8y0"),f(u,"role","cell"),f(u,"class","destination flex-full position-relative vertical-bottom overflow-hidden no-wrap svelte-1hey8y0"),f(h,"role","cell"),f(h,"class","distance color-gray-dark align-right vertical-bottom space-xs space-keep-l svelte-1hey8y0"),f(n,"role","row"),f(n,"class","departure-row-button flex-row pointer svelte-1hey8y0"),f(n,"tabindex",0),f(n,"aria-expanded",t[1]),f(n,"aria-controls",T=`departure-additional-info-${t[0].id}`),f(z,"role","cell"),f(z,"aria-colspan",4),f(z,"class","svelte-1hey8y0"),f(D,"role","row"),f(D,"id",A=`departure-additional-info-${t[0].id}`),f(D,"class","svelte-1hey8y0"),f(e,"role","rowgroup"),f(e,"class","departure-row border-thin-light border-keep-b line-height-xxl svelte-1hey8y0")},m(U,C){w(U,e,C),g(e,n),g(n,r),O(s,r,null),g(n,l),g(n,i),O(a,i,null),g(n,o),g(n,u),N&&N.m(u,null),g(u,c),g(u,p),g(n,m),g(n,h),g(h,j),g(e,F),g(e,D),g(D,z),K&&K.m(z,null),y=!0,I||(X=[Z(n,"click",t[5]),Z(n,"keypress",function(){je(on(t[6]))&&on(t[6]).apply(this,arguments)})],I=!0)},p(U,[C]){var H;t=U;const oe={};C&8&&(oe.now=t[3]),C&1&&(oe.time=t[0].realtimeDeparture),C&1&&(oe.isRealtime=t[0].realtime),s.$set(oe);const _e={};C&1&&(_e.href=t[0].routeUrl),C&129&&(_e.$$scope={dirty:C,ctx:t}),a.$set(_e),(H=t[2])!=null&&H.length?N||(N=wn(),N.c(),N.m(u,c)):N&&(N.d(1),N=null),(!y||C&1)&&d!==(d=t[0].destination+"")&&re(p,d),(!y||C&1)&&S!==(S=pn(t[0].distance)+"")&&re(j,S),(!y||C&2)&&f(n,"aria-expanded",t[1]),(!y||C&1&&T!==(T=`departure-additional-info-${t[0].id}`))&&f(n,"aria-controls",T),t[1]?K?(K.p(t,C),C&2&&v(K,1)):(K=kn(t),K.c(),v(K,1),K.m(z,null)):K&&(ie(),k(K,1,1,()=>{K=null}),ae()),(!y||C&1&&A!==(A=`departure-additional-info-${t[0].id}`))&&f(D,"id",A)},i(U){y||(v(s.$$.fragment,U),v(a.$$.fragment,U),v(K),y=!0)},o(U){k(s.$$.fragment,U),k(a.$$.fragment,U),k(K),y=!1},d(U){U&&b(e),E(s),E(a),N&&N.d(),K&&K.d(),I=!1,fe(X)}}}function Ya(t,e,n){let{departure:r}=e,{isToggled:s}=e,{disruptions:l}=e,{now:i}=e,{onRowToggle:a}=e;const o=()=>a(r.id),u=()=>a(r.id);return t.$$set=c=>{"departure"in c&&n(0,r=c.departure),"isToggled"in c&&n(1,s=c.isToggled),"disruptions"in c&&n(2,l=c.disruptions),"now"in c&&n(3,i=c.now),"onRowToggle"in c&&n(4,a=c.onRowToggle)},[r,s,l,i,a,o,u]}class Qa extends M{constructor(e){super(),P(this,e,Ya,Ka,L,{departure:0,isToggled:1,disruptions:2,now:3,onRowToggle:4})}}function Za(t){let e,n,r,s,l,i,a;return{c(){e=_("div"),n=_("button"),r=W(t[2]),f(n,"aria-label",t[4]),f(n,"class","space-xxs space-keep-b bold svelte-abcepq"),f(e,"role","columnheader"),f(e,"aria-sort",s=t[3]===-1?"descending":"ascending"),f(e,"class",l=$e(`header bg-white ${t[0]}`)+" svelte-abcepq"),ee(e,"active",t[1])},m(o,u){w(o,e,u),g(e,n),g(n,r),i||(a=Z(n,"click",t[6]),i=!0)},p(o,[u]){u&4&&re(r,o[2]),u&16&&f(n,"aria-label",o[4]),u&8&&s!==(s=o[3]===-1?"descending":"ascending")&&f(e,"aria-sort",s),u&1&&l!==(l=$e(`header bg-white ${o[0]}`)+" svelte-abcepq")&&f(e,"class",l),u&3&&ee(e,"active",o[1])},i:V,o:V,d(o){o&&b(e),i=!1,a()}}}function xa(t,e,n){let{propName:r}=e,{active:s=!1}=e,{text:l=""}=e,{sortDir:i=-1}=e,{label:a}=e,{onClick:o}=e;const u=()=>o(r);return t.$$set=c=>{"propName"in c&&n(0,r=c.propName),"active"in c&&n(1,s=c.active),"text"in c&&n(2,l=c.text),"sortDir"in c&&n(3,i=c.sortDir),"label"in c&&n(4,a=c.label),"onClick"in c&&n(5,o=c.onClick)},[r,s,l,i,a,o,u]}class eo extends M{constructor(e){super(),P(this,e,xa,Za,L,{propName:0,active:1,text:2,sortDir:3,label:4,onClick:5})}}function $n(t,e,n){const r=t.slice();return r[14]=e[n],r}function Sn(t,e,n){const r=t.slice();return r[17]=e[n],r}function jn(t){let e,n;return e=new eo({props:{propName:t[17].propName,active:t[1].propName===t[17].propName,onClick:t[8],text:t[17].text,label:t[17].label,sortDir:t[1].sortDir}}),{c(){R(e.$$.fragment)},m(r,s){O(e,r,s),n=!0},p(r,s){const l={};s&2&&(l.active=r[1].propName===r[17].propName),s&2&&(l.sortDir=r[1].sortDir),e.$set(l)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){E(e,r)}}}function to(t){let e;return{c(){e=_("div"),e.innerHTML=`<div role="cell" aria-colspan="${4}" class="svelte-1943w94">L\xE4ht\xF6j\xE4 ei l\xF6ytynyt annetuilla hakukriteereill\xE4 tai suodattimilla.</div>`,f(e,"role","row"),f(e,"class","italic align-center space-m space-clear-rl svelte-1943w94"),f(e,"tabindex","0")},m(n,r){w(n,e,r)},p:V,i:V,o:V,d(n){n&&b(e)}}}function no(t){let e=[],n=new Map,r,s,l=t[6];const i=a=>a[14].id;for(let a=0;a<l.length;a+=1){let o=$n(t,l,a),u=i(o);n.set(u,e[a]=An(u,o))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=lt()},m(a,o){for(let u=0;u<e.length;u+=1)e[u].m(a,o);w(a,r,o),s=!0},p(a,o){o&632&&(l=a[6],ie(),e=jt(e,o,i,1,a,l,n,r.parentNode,St,An,r,$n),ae())},i(a){if(!s){for(let o=0;o<l.length;o+=1)v(e[o]);s=!0}},o(a){for(let o=0;o<e.length;o+=1)k(e[o]);s=!1},d(a){for(let o=0;o<e.length;o+=1)e[o].d(a);a&&b(r)}}}function An(t,e){let n,r,s;return r=new Qa({props:{departure:e[14],isToggled:e[3]===e[14].id,onRowToggle:e[9],disruptions:e[5][e[14].routeId],now:e[4]}}),{key:t,first:null,c(){n=lt(),R(r.$$.fragment),this.first=n},m(l,i){w(l,n,i),O(r,l,i),s=!0},p(l,i){e=l;const a={};i&64&&(a.departure=e[14]),i&72&&(a.isToggled=e[3]===e[14].id),i&96&&(a.disruptions=e[5][e[14].routeId]),i&16&&(a.now=e[4]),r.$set(a)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){k(r.$$.fragment,l),s=!1},d(l){l&&b(n),E(r,l)}}}function ro(t){let e,n,r,s,l=`L\xE4ht\xF6j\xE4 yhteens\xE4 ${t[2].length} kappaletta`,i,a,o,u,c,d,p,m,h;n=new ja({props:{class:"space-xxl space-keep-t",show:t[0]}});let S=t[7],j=[];for(let A=0;A<S.length;A+=1)j[A]=jn(Sn(t,S,A));const T=A=>k(j[A],1,1,()=>{j[A]=null}),F=[no,to],D=[];function z(A,y){return A[6].length?0:A[0]?-1:1}return~(p=z(t))&&(m=D[p]=F[p](t)),{c(){e=_("div"),R(n.$$.fragment),r=$(),s=_("div"),i=W(l),a=$(),o=_("div"),u=_("div"),c=_("div");for(let A=0;A<j.length;A+=1)j[A].c();d=$(),m&&m.c(),f(s,"role","status"),f(s,"class","sr-only svelte-1943w94"),f(c,"role","row"),f(c,"class","departures-list-header flex-row no-wrap space-xs space-keep-b svelte-1943w94"),f(u,"role","rowgroup"),f(u,"class","svelte-1943w94"),f(o,"role","table"),f(o,"aria-label","L\xE4hd\xF6t"),f(o,"class","svelte-1943w94"),f(e,"class","position-relative svelte-1943w94")},m(A,y){w(A,e,y),O(n,e,null),g(e,r),g(e,s),g(s,i),g(e,a),g(e,o),g(o,u),g(u,c);for(let I=0;I<j.length;I+=1)j[I].m(c,null);g(o,d),~p&&D[p].m(o,null),h=!0},p(A,[y]){const I={};if(y&1&&(I.show=A[0]),n.$set(I),(!h||y&4)&&l!==(l=`L\xE4ht\xF6j\xE4 yhteens\xE4 ${A[2].length} kappaletta`)&&re(i,l),y&386){S=A[7];let N;for(N=0;N<S.length;N+=1){const K=Sn(A,S,N);j[N]?(j[N].p(K,y),v(j[N],1)):(j[N]=jn(K),j[N].c(),v(j[N],1),j[N].m(c,null))}for(ie(),N=S.length;N<j.length;N+=1)T(N);ae()}let X=p;p=z(A),p===X?~p&&D[p].p(A,y):(m&&(ie(),k(D[X],1,1,()=>{D[X]=null}),ae()),~p?(m=D[p],m?m.p(A,y):(m=D[p]=F[p](A),m.c()),v(m,1),m.m(o,null)):m=null)},i(A){if(!h){v(n.$$.fragment,A);for(let y=0;y<S.length;y+=1)v(j[y]);v(m),h=!0}},o(A){k(n.$$.fragment,A),j=j.filter(Boolean);for(let y=0;y<j.length;y+=1)k(j[y]);k(m),h=!1},d(A){A&&b(e),E(n),$t(j,A),~p&&D[p].d()}}}function lo(t,e,n){let r,s,l,i,a;ue(t,Ge,T=>n(11,i=T)),ue(t,qe,T=>n(12,a=T));const o=[{text:"L\xE4htee",propName:"realtimeDeparture",label:"J\xE4rjest\xE4 lista l\xE4ht\xF6ajan mukaan"},{text:"Linja",propName:"routeName",label:"J\xE4rjest\xE4 lista linjan mukaan"},{text:"M\xE4\xE4r\xE4np\xE4\xE4",propName:"destination",label:"J\xE4rjest\xE4 lista m\xE4\xE4r\xE4np\xE4\xE4n mukaan"},{text:"Pys\xE4kille",propName:"distance",label:"J\xE4rjest\xE4 lista pys\xE4kin et\xE4isyyden mukaan"}];let u={propName:"realtimeDeparture",sortDir:1},c="",d=Date.now(),{isLoading:p=!1}=e,{disruptions:m}=e;st(()=>{const T=setInterval(()=>{n(4,d=Date.now())},2e4);return()=>void clearInterval(T)});function h(T){const F=u.propName===T?u.sortDir*-1:1;n(1,u={propName:T,sortDir:F})}function S(T,F){const D=T.sortDir===-1?Vl:Xt;return Es([D(js("realtimeDeparture",T.propName)),Xt(ce("realtimeDeparture"))],F)}function j(T){n(3,c=c===T?"":T)}return t.$$set=T=>{"isLoading"in T&&n(0,p=T.isLoading),"disruptions"in T&&n(10,m=T.disruptions)},t.$$.update=()=>{t.$$.dirty&6144&&n(2,r=Ea(a,i)),t.$$.dirty&6&&n(6,s=S(u,r)),t.$$.dirty&1024&&n(5,l=Zl(Rt("",["route","gtfsId"]),m))},[p,u,r,c,d,l,s,o,h,j,m,i,a]}class so extends M{constructor(e){super(),P(this,e,lo,ro,L,{isLoading:0,disruptions:10})}}function io(t){let e,n,r,s=t[0].message+"",l,i,a,o,u,c,d;return o=new Ji({}),{c(){e=_("div"),n=_("h2"),n.textContent="Tapahtui virhe!",r=$(),l=W(s),i=$(),a=_("button"),R(o.$$.fragment),f(n,"class","text-m bold space-xxs space-keep-b svelte-18797p9"),f(a,"class","close-button space-xs svelte-18797p9"),f(a,"aria-label","Sulje"),f(e,"class","position-relative space-s color-alert bg-light-red corner-rounded svelte-18797p9"),f(e,"tabindex","0")},m(p,m){w(p,e,m),g(e,n),g(e,r),g(e,l),g(e,i),g(e,a),O(o,a,null),u=!0,c||(d=[Z(a,"click",t[1]),fr(rt.call(null,e))],c=!0)},p(p,[m]){(!u||m&1)&&s!==(s=p[0].message+"")&&re(l,s)},i(p){u||(v(o.$$.fragment,p),u=!0)},o(p){k(o.$$.fragment,p),u=!1},d(p){p&&b(e),E(o),c=!1,fe(d)}}}function ao(t,e,n){let{error:r}=e;function s(l){Re.call(this,t,l)}return t.$$set=l=>{"error"in l&&n(0,r=l.error)},[r,s]}class oo extends M{constructor(e){super(),P(this,e,ao,io,L,{error:0})}}function uo(t){let e;return{c(){e=W(`avointa dataa
      `)},m(n,r){w(n,e,r)},d(n){n&&b(e)}}}function co(t){let e,n,r,s,l,i="L\xE4hd\xF6t p\xE4ivitetty ",a,o,u,c=(t[0]?en(t[0]):"Ei koskaan")+"",d,p,m=" / L\xE4ht\xF6jen tiedot ovat HSL:n tarjoamaa",h,S,j,T,F;return j=new ft({props:{href:"https://digitransit.fi/",class:"underline",$$slots:{default:[uo]},$$scope:{ctx:t}}}),{c(){e=_("footer"),n=_("div"),r=_("p"),r.textContent="Julkisilla.info v2.0.0",s=$(),l=_("p"),a=W(i),o=$(),u=_("span"),d=W(c),p=$(),h=W(m),S=$(),R(j.$$.fragment),T=W("."),f(r,"class","footer-app-name font-heading"),f(u,"class","italic"),f(n,"class","footer-content max-content-width centering-margin"),f(e,"class","full-width text-s color-white bg-bus-dark line-height-xl space-s")},m(D,z){w(D,e,z),g(e,n),g(n,r),g(n,s),g(n,l),g(l,a),g(l,o),g(l,u),g(u,d),g(l,p),g(l,h),g(l,S),O(j,l,null),g(l,T),F=!0},p(D,[z]){(!F||z&1)&&c!==(c=(D[0]?en(D[0]):"Ei koskaan")+"")&&re(d,c);const A={};z&2&&(A.$$scope={dirty:z,ctx:D}),j.$set(A)},i(D){F||(v(j.$$.fragment,D),F=!0)},o(D){k(j.$$.fragment,D),F=!1},d(D){D&&b(e),E(j)}}}function fo(t,e,n){let r;return ue(t,zs,s=>n(0,r=s)),[r]}class po extends M{constructor(e){super(),P(this,e,fo,co,L,{})}}const go=`
 query BatchNearest($id: ID!, $startTime: Long!, $departuresCount: Int) {
     node(id: $id) {
         id
         ...on DepartureRow {
             stoptimes(startTime: $startTime, timeRange: 7200, numberOfDepartures: $departuresCount) {
                 serviceDay
                 scheduledDeparture
                 realtimeDeparture
                 realtimeState
                 realtime
                 headsign
                 trip {
                     id
                 }
             }
         }
     }
 }
`,mo=`
 query Nearest($latitude: Float!, $longitude: Float!, $maxResults: Int, $timeRange:Int, $departuresCount:Int, $maxDistance:Int) {
     nearest(lat: $latitude, lon: $longitude, maxResults: $maxResults, maxDistance: $maxDistance, filterByPlaceTypes: DEPARTURE_ROW) {
         edges {
             node {
                 id
                 distance
                 place {
                     id
                     ... on DepartureRow {
                         stop {
                           gtfsId
                           code
                           name
                           desc
                         }
                         stoptimes(timeRange: $timeRange, numberOfDepartures: $departuresCount, omitNonPickups: true) {
                             serviceDay
                             scheduledDeparture
                             realtimeDeparture
                             realtimeState
                             realtime
                             headsign
                             trip {
                                 id
                             }
                         }
                         pattern {
                             route {
                                 gtfsId
                                 shortName
                                 longName
                                 mode
                             }
                             code
                             headsign
                         }
                     }
                 }
             }
         }
     }
 }
}`;function ho({nodeId:t}){const e=xn();return{query:go,variables:{id:t,startTime:e,departuresCount:rr}}}const ur=t=>{var n;const e={realtime:t.realtime,id:t.trip.id,scheduledDeparture:t.serviceDay+t.scheduledDeparture,realtimeDeparture:t.serviceDay+t.realtimeDeparture,destination:(n=t.headsign)!=null?n:void 0};return t.headsign?e:vs(["destination"],e)},_o=zn(t=>{const{id:e,stoptimes:n=[]}=t.payload.data.node;return n.map(r=>({nodeId:e,...ur(r)}))});async function vo(t){try{const e=await It("routing/v1/routers/hsl/index/graphql/batch",t.map(ho));return _o(e)}catch(e){throw new Error(`L\xE4ht\xF6jen p\xE4ivitys ep\xE4onnistui: ${e.message}`)}}function yo(t,e){return{query:mo,variables:{latitude:t.latitude,longitude:t.longitude,timeRange:Ks,departuresCount:rr,maxResults:Ys,maxDistance:e.range||nr}}}const bo=t=>{const{place:e,distance:n}=t,{route:r,code:s,headsign:l}=e.pattern;return{nodeId:e.id,destination:l,distance:n,vehicleType:r.mode,routeId:r.gtfsId,routeName:r.shortName,stoptimes:e.stoptimes,routeUrl:`https://www.reittiopas.fi/linjat/${r.gtfsId}/pysakit/${s}`,stopUrl:`https://www.reittiopas.fi/pysakit/${e.stop.gtfsId}`,stopDescription:e.stop.desc,stopName:e.stop.name,stopCode:e.stop.code}},wo=Se(Ie(Se(ce("node"),bo)),ut(Se(ce("stoptimes"),os))),ko=t=>t.stoptimes.map(e=>({...t,...ur(e)}));function $o(t){const{data:e}=t;return e?zn(ko,wo(e.nearest.edges)):[]}async function So(t,e){try{const n=await It("routing/v1/routers/hsl/index/graphql",yo(t,e));return $o(n)}catch(n){throw new Error(`L\xE4ht\xF6jen haku ep\xE4onnistui: ${n.message}`)}}const jo=Se(Vn(ce("realtime")),ss(ce("nodeId"))),Ao=(t,e)=>t.map(n=>{const r=e.find(s=>s.nodeId===n.nodeId&&s.id===n.id);return{...n,...r}});async function To(t=[]){const e=jo(t);try{if(e.length){const n=await vo(e),r=Ao(t,n);return Ge.set(r),r}else wt.debug("Nothing to batch")}catch{}}async function Do(t){const n=await(!t.length||t.toLowerCase()===Hs?ar():li(t));ve.set(n)}async function Oo(){ct();const t=await ar();tr.set(t.location),ve.set(t)}async function Eo(t,e){ct();const n=await So(t.location,e);Ge.set(n)}function Ro(t){let e,n,r,s=rn(t[0])+"",l;return{c(){e=_("div"),n=_("span"),n.textContent="!",r=$(),l=W(s),f(n,"class","text-l bold space-xxs space-keep-r"),f(n,"aria-hidden","true"),f(e,"class","text-s color-alert")},m(i,a){w(i,e,a),g(e,n),g(e,r),g(e,l)},p(i,[a]){a&1&&s!==(s=rn(i[0])+"")&&re(l,s)},i:V,o:V,d(i){i&&b(e)}}}function Io(t,e,n){let{error:r}=e;return t.$$set=s=>{"error"in s&&n(0,r=s.error)},[r]}class No extends M{constructor(e){super(),P(this,e,Io,Ro,L,{error:0})}}const Fo=`
 {
   alerts(severityLevel: [WARNING, SEVERE], feeds: ["HSL"]) {
     alertHeaderText
     alertDescriptionText
     alertUrl
     effectiveStartDate
     effectiveEndDate
     route {
       gtfsId
       shortName
     }
   }
 }
`,Lo=Se(Rt([],["data","alerts"]),ut(Se(ce("route"),qn)));async function Co(){try{const t=await It("/routing/v1/routers/hsl/index/graphql",{query:Fo});return Lo(t)}catch{return[]}}function Bo(t){let e,n,r,s,l,i,a,o,u,c,d;return{c(){e=_("div"),n=_("div"),r=_("output"),s=W(t[0]),l=W("m"),i=$(),a=_("label"),a.textContent="Maksimiet\xE4isyys pys\xE4kille",o=$(),u=_("input"),f(r,"for","departurefilter-range"),f(r,"class","svelte-1rej7s6"),f(n,"class","align-right space-xxs space-keep-b svelte-1rej7s6"),f(a,"for","departurefilter-range"),f(a,"class","sr-only svelte-1rej7s6"),f(u,"id","departurefilter-range"),f(u,"class","range-filter svelte-1rej7s6"),f(u,"type","range"),f(u,"name","range"),f(u,"min",Ws),f(u,"max",nr),f(u,"step",Vs),f(e,"class","range-filter-wrapper svelte-1rej7s6")},m(p,m){w(p,e,m),g(e,n),g(n,r),g(r,s),g(r,l),g(e,i),g(e,a),g(e,o),g(e,u),xe(u,t[0]),c||(d=[Z(u,"input",t[1]),Z(u,"change",t[2]),Z(u,"input",t[2])],c=!0)},p(p,[m]){m&1&&re(s,p[0]),m&1&&xe(u,p[0])},i:V,o:V,d(p){p&&b(e),c=!1,fe(d)}}}function Po(t,e,n){let{range:r}=e;function s(i){Re.call(this,t,i)}function l(){r=pr(this.value),n(0,r)}return t.$$set=i=>{"range"in i&&n(0,r=i.range)},[r,s,l]}class Mo extends M{constructor(e){super(),P(this,e,Po,Bo,L,{range:0})}}function Uo(t){let e,n,r,s,l,i,a,o,u,c;return r=new or({props:{alt:"",icon:`${t[0].toLocaleLowerCase()}-withoutBox`,class:"vertical-middle",shadow:t[1]}}),{c(){e=_("button"),n=_("div"),R(r.$$.fragment),f(n,"class",s=$e(`space-xs space-clear-rl text-xl ${t[0].toLowerCase()}`)+" svelte-1p78xz5"),f(e,"class",l=$e(`${t[0].toLowerCase()}`)+" svelte-1p78xz5"),f(e,"aria-label",i=`Suodatin ${nn[t[0]]}`),f(e,"aria-pressed",a=!!t[1]),ee(e,"toggled",t[1])},m(d,p){w(d,e,p),g(e,n),O(r,n,null),o=!0,u||(c=Z(e,"click",t[2]),u=!0)},p(d,[p]){const m={};p&1&&(m.icon=`${d[0].toLocaleLowerCase()}-withoutBox`),p&2&&(m.shadow=d[1]),r.$set(m),(!o||p&1&&s!==(s=$e(`space-xs space-clear-rl text-xl ${d[0].toLowerCase()}`)+" svelte-1p78xz5"))&&f(n,"class",s),(!o||p&1&&l!==(l=$e(`${d[0].toLowerCase()}`)+" svelte-1p78xz5"))&&f(e,"class",l),(!o||p&1&&i!==(i=`Suodatin ${nn[d[0]]}`))&&f(e,"aria-label",i),(!o||p&2&&a!==(a=!!d[1]))&&f(e,"aria-pressed",a),(!o||p&3)&&ee(e,"toggled",d[1])},i(d){o||(v(r.$$.fragment,d),o=!0)},o(d){k(r.$$.fragment,d),o=!1},d(d){d&&b(e),E(r),u=!1,c()}}}function qo(t,e,n){let{vehicleType:r}=e,{isToggled:s}=e;function l(i){Re.call(this,t,i)}return t.$$set=i=>{"vehicleType"in i&&n(0,r=i.vehicleType),"isToggled"in i&&n(1,s=i.isToggled)},[r,s,l]}class zo extends M{constructor(e){super(),P(this,e,qo,Uo,L,{vehicleType:0,isToggled:1})}}function Tn(t,e,n){const r=t.slice();return r[4]=e[n],r}function Dn(t){let e,n;function r(){return t[3](t[4])}return e=new zo({props:{vehicleType:t[4],isToggled:t[0].vehicleTypes.includes(t[4])}}),e.$on("click",r),{c(){R(e.$$.fragment)},m(s,l){O(e,s,l),n=!0},p(s,l){t=s;const i={};l&1&&(i.isToggled=t[0].vehicleTypes.includes(t[4])),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function Ho(t){let e,n,r,s,l;n=new Mo({props:{range:t[0].range}}),n.$on("input",t[1]);let i=Object.values(nt),a=[];for(let u=0;u<i.length;u+=1)a[u]=Dn(Tn(t,i,u));const o=u=>k(a[u],1,1,()=>{a[u]=null});return{c(){e=_("div"),R(n.$$.fragment),r=$(),s=_("div");for(let u=0;u<a.length;u+=1)a[u].c();f(e,"class","space-m space-clear-rl"),f(s,"class","vehicle-type-filters flex-row")},m(u,c){w(u,e,c),O(n,e,null),w(u,r,c),w(u,s,c);for(let d=0;d<a.length;d+=1)a[d].m(s,null);l=!0},p(u,[c]){const d={};if(c&1&&(d.range=u[0].range),n.$set(d),c&5){i=Object.values(nt);let p;for(p=0;p<i.length;p+=1){const m=Tn(u,i,p);a[p]?(a[p].p(m,c),v(a[p],1)):(a[p]=Dn(m),a[p].c(),v(a[p],1),a[p].m(s,null))}for(ie(),p=i.length;p<a.length;p+=1)o(p);ae()}},i(u){if(!l){v(n.$$.fragment,u);for(let c=0;c<i.length;c+=1)v(a[c]);l=!0}},o(u){k(n.$$.fragment,u),a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)k(a[c]);l=!1},d(u){u&&b(e),E(n),u&&b(r),u&&b(s),$t(a,u)}}}function Wo(t,e,n){let r;ue(t,qe,a=>n(0,r=a));function s(a){const o=+a.currentTarget.value;qe.update(Gt("range",o))}function l(a){qe.update(o=>Gt("vehicleTypes",Is(o.vehicleTypes,[a]),o))}return[r,s,l,a=>l(a)]}class Vo extends M{constructor(e){super(),P(this,e,Wo,Ho,L,{})}}function On(t){let e,n,r;return n=new oo({props:{error:t[1]}}),n.$on("click",t[6]),{c(){e=_("div"),R(n.$$.fragment),f(e,"class","space-s space-keep-b svelte-1i2u73t")},m(s,l){w(s,e,l),O(n,e,null),r=!0},p(s,l){const i={};l&2&&(i.error=s[1]),n.$set(i)},i(s){r||(v(n.$$.fragment,s),r=!0)},o(s){k(n.$$.fragment,s),r=!1},d(s){s&&b(e),E(n)}}}function En(t){let e,n,r;return n=new $r({props:{accuracy:t[3].location.accuracy}}),{c(){e=_("div"),R(n.$$.fragment),f(e,"class","space-xs space-keep-t  svelte-1i2u73t")},m(s,l){w(s,e,l),O(n,e,null),r=!0},p(s,l){const i={};l&8&&(i.accuracy=s[3].location.accuracy),n.$set(i)},i(s){r||(v(n.$$.fragment,s),r=!0)},o(s){k(n.$$.fragment,s),r=!1},d(s){s&&b(e),E(n)}}}function Rn(t){let e,n;return e=new No({props:{error:t[1]}}),{c(){R(e.$$.fragment)},m(r,s){O(e,r,s),n=!0},p(r,s){const l={};s&2&&(l.error=r[1]),e.$set(l)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){E(e,r)}}}function Xo(t){var oe,_e;let e,n,r,s,l,i,a,o,u,c,d,p,m,h,S,j,T,F,D,z,A,y,I,X,N,K;r=new wa({});let Y=t[1]&&!(t[1]instanceof we)&&On(t);o=new _i({props:{onSearch:t[4]}});let U=((_e=(oe=t[3])==null?void 0:oe.location)==null?void 0:_e.accuracy)&&En(t),C=t[1]&&t[1]instanceof we&&Rn(t);return F=new Vo({}),A=new so({props:{isLoading:t[0],disruptions:t[2]}}),I=new po({}),{c(){e=_("div"),n=_("div"),R(r.$$.fragment),s=$(),l=_("main"),i=_("div"),Y&&Y.c(),a=$(),R(o.$$.fragment),u=$(),c=_("div"),d=_("button"),d.textContent="Siirry hakutuloksiin",p=$(),m=_("div"),U&&U.c(),h=$(),S=_("div"),C&&C.c(),j=$(),T=_("div"),R(F.$$.fragment),D=$(),z=_("div"),R(A.$$.fragment),y=$(),R(I.$$.fragment),f(n,"class","space-m space-keep-b svelte-1i2u73t"),f(i,"role","alert"),f(i,"class","svelte-1i2u73t"),f(d,"class","sr-only sr-only-focusable svelte-1i2u73t"),f(c,"class","relative svelte-1i2u73t"),f(m,"role","status"),f(m,"class","align-right svelte-1i2u73t"),f(S,"role","alert"),f(S,"class","align-right svelte-1i2u73t"),f(T,"class","space-m space-keep-b svelte-1i2u73t"),f(z,"class","flex-column flex-full svelte-1i2u73t"),f(l,"class","flex-column flex-full full-width centering-margin max-content-width space-xs space-clear-t svelte-1i2u73t"),f(e,"class","app-content flex-column svelte-1i2u73t")},m(H,G){w(H,e,G),g(e,n),O(r,n,null),g(e,s),g(e,l),g(l,i),Y&&Y.m(i,null),g(l,a),O(o,l,null),g(l,u),g(l,c),g(c,d),g(l,p),g(l,m),U&&U.m(m,null),g(l,h),g(l,S),C&&C.m(S,null),g(l,j),g(l,T),O(F,T,null),g(l,D),g(l,z),O(A,z,null),g(e,y),O(I,e,null),X=!0,N||(K=Z(d,"click",t[5]),N=!0)},p(H,[G]){var J,se;H[1]&&!(H[1]instanceof we)?Y?(Y.p(H,G),G&2&&v(Y,1)):(Y=On(H),Y.c(),v(Y,1),Y.m(i,null)):Y&&(ie(),k(Y,1,1,()=>{Y=null}),ae()),(se=(J=H[3])==null?void 0:J.location)!=null&&se.accuracy?U?(U.p(H,G),G&8&&v(U,1)):(U=En(H),U.c(),v(U,1),U.m(m,null)):U&&(ie(),k(U,1,1,()=>{U=null}),ae()),H[1]&&H[1]instanceof we?C?(C.p(H,G),G&2&&v(C,1)):(C=Rn(H),C.c(),v(C,1),C.m(S,null)):C&&(ie(),k(C,1,1,()=>{C=null}),ae());const te={};G&1&&(te.isLoading=H[0]),G&4&&(te.disruptions=H[2]),A.$set(te)},i(H){X||(v(r.$$.fragment,H),v(Y),v(o.$$.fragment,H),v(U),v(C),v(F.$$.fragment,H),v(A.$$.fragment,H),v(I.$$.fragment,H),X=!0)},o(H){k(r.$$.fragment,H),k(Y),k(o.$$.fragment,H),k(U),k(C),k(F.$$.fragment,H),k(A.$$.fragment,H),k(I.$$.fragment,H),X=!1},d(H){H&&b(e),E(r),Y&&Y.d(),E(o),U&&U.d(),C&&C.d(),E(F),E(A),E(I),N=!1,K()}}}function Go(t,e,n){let r,s,l;ue(t,qe,h=>n(7,r=h)),ue(t,Ge,h=>n(8,s=h)),ue(t,ve,h=>n(3,l=h));let i=!1,a,o=[];function u(h){n(1,a=h)}function c(){n(0,i=!1)}function d(h){n(0,i=!0),Do(h).catch(u).finally(c)}function p(){rt(document.querySelector(".departure-row-button"))}return st(()=>{n(0,i=!0),Oo().catch(u).finally(c),Co().then(j=>n(2,o=j)).catch(wt.error);const h=setInterval(()=>void To(s),Gs),S=ve.subscribe(j=>{n(1,a=void 0),j&&(wt.debug("Address changed",j==null?void 0:j.label),n(0,i=!0),Eo(j,r).catch(u).finally(c))});return()=>{clearInterval(h),S()}}),[i,a,o,l,d,p,()=>n(1,a=void 0)]}class Jo extends M{constructor(e){super(),P(this,e,Go,Xo,L,{})}}new Jo({target:document.getElementById("app")});
